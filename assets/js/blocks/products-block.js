(function(e, a) { for(var i in a) e[i] = a[i]; }(this, /******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"products-block": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./assets/js/legacy/products-block.jsx","vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./assets/js/legacy/products-block.jsx":
/*!*********************************************!*\
  !*** ./assets/js/legacy/products-block.jsx ***!
  \*********************************************/
/*! exports provided: ProductPreview */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProductPreview\", function() { return ProductPreview; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/extends */ \"./node_modules/@babel/runtime/helpers/extends.js\");\n/* harmony import */ var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @wordpress/element */ \"@wordpress/element\");\n/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _products_block_scss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./products-block.scss */ \"./assets/js/legacy/products-block.scss\");\n/* harmony import */ var _products_block_scss__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_products_block_scss__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _views_specific_select_jsx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./views/specific-select.jsx */ \"./assets/js/legacy/views/specific-select.jsx\");\n/* harmony import */ var _views_category_select_jsx__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./views/category-select.jsx */ \"./assets/js/legacy/views/category-select.jsx\");\n/* harmony import */ var _views_attribute_select_jsx__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./views/attribute-select.jsx */ \"./assets/js/legacy/views/attribute-select.jsx\");\n\n\n\n\n\n\n\n\n\nvar __ = wp.i18n.__;\nvar _wp$element = wp.element,\n    Component = _wp$element.Component,\n    RawHTML = _wp$element.RawHTML;\nvar registerBlockType = wp.blocks.registerBlockType;\nvar _wp$editor = wp.editor,\n    InspectorControls = _wp$editor.InspectorControls,\n    BlockControls = _wp$editor.BlockControls;\nvar _wp$components = wp.components,\n    Toolbar = _wp$components.Toolbar,\n    Button = _wp$components.Button,\n    Dashicon = _wp$components.Dashicon,\n    RangeControl = _wp$components.RangeControl,\n    Tooltip = _wp$components.Tooltip,\n    SelectControl = _wp$components.SelectControl;\nvar _wp = wp,\n    apiFetch = _wp.apiFetch;\n\n\n\n\n/**\n * A setting has the following properties:\n *    title - Display title of the setting.\n *    description - Display description of the setting.\n *    value - Display setting slug to set when selected.\n *    group_container - (optional) If set the setting is a parent container.\n *    no_orderby - (optional) If set the setting does not allow orderby settings.\n */\n\nvar PRODUCTS_BLOCK_DISPLAY_SETTINGS = {\n  specific: {\n    title: __('Individual products'),\n    description: __('Hand-pick which products to display'),\n    value: 'specific'\n  },\n  category: {\n    title: __('Product category'),\n    description: __('Display products from a specific category or multiple categories'),\n    value: 'category'\n  },\n  filter: {\n    title: __('Filter products'),\n    description: __('E.g. featured products, or products with a specific attribute like size or color'),\n    value: 'filter',\n    group_container: 'filter'\n  },\n  featured: {\n    title: __('Featured products'),\n    description: '',\n    value: 'featured'\n  },\n  on_sale: {\n    title: __('On sale'),\n    description: '',\n    value: 'on_sale'\n  },\n  best_selling: {\n    title: __('Best sellers'),\n    description: '',\n    value: 'best_selling',\n    no_orderby: true\n  },\n  top_rated: {\n    title: __('Top rated'),\n    description: '',\n    value: 'top_rated',\n    no_orderby: true\n  },\n  attribute: {\n    title: __('Attribute'),\n    description: '',\n    value: 'attribute'\n  },\n  all: {\n    title: __('All products'),\n    description: __('Display all products ordered chronologically, alphabetically, by price, by rating or by sales'),\n    value: 'all'\n  }\n};\n/**\n * Returns whether or not a display scope supports orderby options.\n *\n * @param string display The display scope slug.\n * @return bool\n */\n\nfunction supportsOrderby(display) {\n  return !(PRODUCTS_BLOCK_DISPLAY_SETTINGS.hasOwnProperty(display) && PRODUCTS_BLOCK_DISPLAY_SETTINGS[display].hasOwnProperty('no_orderby') && PRODUCTS_BLOCK_DISPLAY_SETTINGS[display].no_orderby);\n}\n/**\n * One option from the list of all available ways to display products.\n */\n\n\nvar ProductsBlockSettingsEditorDisplayOption =\n/*#__PURE__*/\nfunction (_Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(ProductsBlockSettingsEditorDisplayOption, _Component);\n\n  function ProductsBlockSettingsEditorDisplayOption() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, ProductsBlockSettingsEditorDisplayOption);\n\n    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(ProductsBlockSettingsEditorDisplayOption).apply(this, arguments));\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(ProductsBlockSettingsEditorDisplayOption, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var icon = 'arrow-right-alt2';\n\n      if ('filter' === this.props.value && this.props.extended) {\n        icon = 'arrow-down-alt2';\n      }\n\n      var classes = 'wc-products-display-options__option wc-products-display-options__option--' + this.props.value;\n\n      if (this.props.current === this.props.value) {\n        icon = 'yes';\n        classes += ' wc-products-display-options__option--current';\n      }\n      /* eslint-disable jsx-a11y/click-events-have-key-events */\n\n      /* eslint-disable jsx-a11y/no-static-element-interactions */\n\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: classes,\n        onClick: function onClick() {\n          if (_this.props.current !== _this.props.value) {\n            _this.props.update_display_callback(_this.props.value);\n          }\n        }\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: \"wc-products-display-options__option-content\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"span\", {\n        className: \"wc-products-display-options__option-title\"\n      }, this.props.title), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"p\", {\n        className: \"wc-products-display-options__option-description\"\n      }, this.props.description)), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: \"wc-products-display-options__icon\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(Dashicon, {\n        icon: icon\n      })));\n      /* eslint-enable */\n    }\n  }]);\n\n  return ProductsBlockSettingsEditorDisplayOption;\n}(Component);\n/**\n * A list of all available ways to display products.\n */\n\n\nvar ProductsBlockSettingsEditorDisplayOptions =\n/*#__PURE__*/\nfunction (_Component2) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(ProductsBlockSettingsEditorDisplayOptions, _Component2);\n\n  /**\n   * Constructor.\n   */\n  function ProductsBlockSettingsEditorDisplayOptions(props) {\n    var _this2;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, ProductsBlockSettingsEditorDisplayOptions);\n\n    _this2 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(ProductsBlockSettingsEditorDisplayOptions).call(this, props));\n    _this2.setWrapperRef = _this2.setWrapperRef.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this2)));\n    _this2.handleClickOutside = _this2.handleClickOutside.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this2)));\n    return _this2;\n  }\n  /**\n   * Hook in the listener for closing menu when clicked outside.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(ProductsBlockSettingsEditorDisplayOptions, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.existing) {\n        document.addEventListener('mousedown', this.handleClickOutside);\n      }\n    }\n    /**\n     * Remove the listener for closing menu when clicked outside.\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.existing) {\n        document.removeEventListener('mousedown', this.handleClickOutside);\n      }\n    }\n    /**\n     * Set the wrapper reference.\n     *\n     * @param node DOMNode\n     */\n\n  }, {\n    key: \"setWrapperRef\",\n    value: function setWrapperRef(node) {\n      this.wrapperRef = node;\n    }\n    /**\n     * Close the menu when user clicks outside the search area.\n     */\n\n  }, {\n    key: \"handleClickOutside\",\n    value: function handleClickOutside(event) {\n      if (this.wrapperRef && !this.wrapperRef.contains(event.target) && 'wc-products-settings-heading__change-button button-link' !== event.target.getAttribute('class')) {\n        this.props.closeMenu();\n      }\n    }\n    /**\n     * Render the list of options.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = 'wc-products-display-options';\n\n      if (this.props.extended) {\n        classes += ' wc-products-display-options--extended';\n      }\n\n      if (this.props.existing) {\n        classes += ' wc-products-display-options--popover';\n      }\n\n      var display_settings = [];\n\n      for (var setting_key in PRODUCTS_BLOCK_DISPLAY_SETTINGS) {\n        display_settings.push(Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(ProductsBlockSettingsEditorDisplayOption, _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1___default()({}, PRODUCTS_BLOCK_DISPLAY_SETTINGS[setting_key], {\n          update_display_callback: this.props.update_display_callback,\n          extended: this.props.extended,\n          current: this.props.current,\n          key: setting_key\n        })));\n      }\n\n      var arrow = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"span\", {\n        className: \"wc-products-display-options--popover__arrow\"\n      });\n      var description = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"p\", {\n        className: \"wc-products-block-description\"\n      }, __('Choose which products you\\'d like to display:'));\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: classes,\n        ref: this.setWrapperRef\n      }, this.props.existing && arrow, !this.props.existing && description, display_settings);\n    }\n  }]);\n\n  return ProductsBlockSettingsEditorDisplayOptions;\n}(Component);\n/**\n * The products block when in Edit mode.\n */\n\n\nvar ProductsBlockSettingsEditor =\n/*#__PURE__*/\nfunction (_Component3) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(ProductsBlockSettingsEditor, _Component3);\n\n  /**\n   * Constructor.\n   */\n  function ProductsBlockSettingsEditor(props) {\n    var _this3;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, ProductsBlockSettingsEditor);\n\n    _this3 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(ProductsBlockSettingsEditor).call(this, props));\n    _this3.state = {\n      display: props.selected_display,\n      menu_visible: props.selected_display ? false : true,\n      expanded_group: ''\n    };\n    _this3.updateDisplay = _this3.updateDisplay.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this3)));\n    _this3.closeMenu = _this3.closeMenu.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this3)));\n    return _this3;\n  }\n  /**\n   * Update the display settings for the block.\n   *\n   * @param value String\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(ProductsBlockSettingsEditor, [{\n    key: \"updateDisplay\",\n    value: function updateDisplay(value) {\n      // If not a group update display.\n      var new_state = {\n        display: value,\n        menu_visible: false,\n        expanded_group: ''\n      };\n      var is_group = 'undefined' !== PRODUCTS_BLOCK_DISPLAY_SETTINGS[value].group_container && PRODUCTS_BLOCK_DISPLAY_SETTINGS[value].group_container;\n\n      if (is_group) {\n        // If the group has not been expanded, expand it.\n        new_state = {\n          menu_visible: true,\n          expanded_group: value\n        }; // If the group has already been expanded, collapse it.\n\n        if (this.state.expanded_group === PRODUCTS_BLOCK_DISPLAY_SETTINGS[value].group_container) {\n          new_state.expanded_group = '';\n        }\n      }\n\n      this.setState(new_state); // Only update the display setting if a non-group setting was selected.\n\n      if (!is_group) {\n        this.props.update_display_callback(value);\n      }\n    }\n  }, {\n    key: \"closeMenu\",\n    value: function closeMenu() {\n      this.setState({\n        menu_visible: false\n      });\n    }\n    /**\n     * Render the display settings dropdown and any extra contextual settings.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var extra_settings = null;\n\n      if ('specific' === this.state.display) {\n        extra_settings = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(_views_specific_select_jsx__WEBPACK_IMPORTED_MODULE_10__[\"ProductsSpecificSelect\"], this.props);\n      } else if ('category' === this.state.display) {\n        extra_settings = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(_views_category_select_jsx__WEBPACK_IMPORTED_MODULE_11__[\"ProductsCategorySelect\"], this.props);\n      } else if ('attribute' === this.state.display) {\n        extra_settings = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(_views_attribute_select_jsx__WEBPACK_IMPORTED_MODULE_12__[\"ProductsAttributeSelect\"], this.props);\n      }\n\n      var menu = this.state.menu_visible ? Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(ProductsBlockSettingsEditorDisplayOptions, {\n        extended: this.state.expanded_group ? true : false,\n        existing: this.state.display ? true : false,\n        current: this.state.display,\n        closeMenu: this.closeMenu,\n        update_display_callback: this.updateDisplay\n      }) : null;\n      var heading = null;\n\n      if (this.state.display) {\n        var group_options = ['featured', 'on_sale', 'attribute', 'best_selling', 'top_rated'];\n        var should_group_expand = group_options.includes(this.state.display) ? this.state.display : '';\n        var menu_link = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"button\", {\n          type: \"button\",\n          className: \"wc-products-settings-heading__change-button button-link\",\n          onClick: function onClick() {\n            _this4.setState({\n              menu_visible: !_this4.state.menu_visible,\n              expanded_group: should_group_expand\n            });\n          }\n        }, __('Display different products'));\n        heading = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n          className: \"wc-products-settings-heading\"\n        }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n          className: \"wc-products-settings-heading__current\"\n        }, __('Displaying '), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"strong\", null, __(PRODUCTS_BLOCK_DISPLAY_SETTINGS[this.state.display].title))), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n          className: \"wc-products-settings-heading__change\"\n        }, menu_link));\n      }\n\n      var done_button = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"button\", {\n        type: \"button\",\n        className: \"button wc-products-settings__footer-button\",\n        onClick: this.props.done_callback\n      }, __('Done'));\n\n      if (['', 'specific', 'category', 'attribute'].includes(this.state.display) && !this.props.selected_display_setting.length) {\n        var done_tooltips = {\n          '': __('Please select which products you\\'d like to display'),\n          specific: __('Please search for and select products to display'),\n          category: __('Please select at least one category to display'),\n          attribute: __('Please select an attribute')\n        };\n        done_button = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(Tooltip, {\n          text: done_tooltips[this.state.display]\n        }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"button\", {\n          type: \"button\",\n          className: \"button wc-products-settings__footer-button disabled\"\n        }, __('Done')));\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: 'wc-products-settings ' + (this.state.expanded_group ? 'expanded-group-' + this.state.expanded_group : '')\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"h4\", {\n        className: \"wc-products-settings__title\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(Dashicon, {\n        icon: 'screenoptions'\n      }), \" \", __('Products')), heading, menu, extra_settings, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: \"wc-products-settings__footer\"\n      }, done_button));\n    }\n  }]);\n\n  return ProductsBlockSettingsEditor;\n}(Component);\n/**\n * One product in the product block preview.\n */\n\n\nvar ProductPreview =\n/*#__PURE__*/\nfunction (_Component4) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(ProductPreview, _Component4);\n\n  function ProductPreview() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, ProductPreview);\n\n    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(ProductPreview).apply(this, arguments));\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(ProductPreview, [{\n    key: \"render\",\n    value: function render() {\n      var product = this.props.product;\n      var image = null;\n\n      if (product.images.length) {\n        image = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"img\", {\n          src: product.images[0].src,\n          alt: \"\"\n        });\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: \"product-preview\",\n        key: product.id + '-preview'\n      }, image, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: \"product-title\"\n      }, product.name), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: \"product-price\",\n        dangerouslySetInnerHTML: {\n          __html: product.price_html\n        }\n      }), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"span\", {\n        className: \"product-add-to-cart\"\n      }, __('Add to cart')));\n    }\n  }]);\n\n  return ProductPreview;\n}(Component);\n/**\n * Renders a preview of what the block will look like with current settings.\n */\n\nvar ProductsBlockPreview =\n/*#__PURE__*/\nfunction (_Component5) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(ProductsBlockPreview, _Component5);\n\n  /**\n   * Constructor\n   */\n  function ProductsBlockPreview(props) {\n    var _this5;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, ProductsBlockPreview);\n\n    _this5 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(ProductsBlockPreview).call(this, props));\n    _this5.state = {\n      products: [],\n      loaded: false,\n      query: ''\n    };\n    _this5.updatePreview = _this5.updatePreview.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this5)));\n    _this5.getQuery = _this5.getQuery.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this5)));\n    return _this5;\n  }\n  /**\n   * Get the preview when component is first loaded.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(ProductsBlockPreview, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updatePreview();\n    }\n    /**\n     * Update the preview when component is updated.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.getQuery() !== this.state.query && this.state.loaded) {\n        this.updatePreview();\n      }\n    }\n    /**\n     * Get the endpoint for the current state of the component.\n     *\n     * @return string\n     */\n\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      var _this$props$attribute = this.props.attributes,\n          columns = _this$props$attribute.columns,\n          rows = _this$props$attribute.rows,\n          display = _this$props$attribute.display,\n          display_setting = _this$props$attribute.display_setting,\n          orderby = _this$props$attribute.orderby;\n      var query = {\n        status: 'publish',\n        per_page: rows * columns\n      };\n\n      if ('specific' === display) {\n        query.include = display_setting.join(',');\n        query.per_page = display_setting.length;\n      } else if ('category' === display) {\n        query.category = display_setting.join(',');\n      } else if ('attribute' === display && display_setting.length) {\n        query.attribute = Object(_views_attribute_select_jsx__WEBPACK_IMPORTED_MODULE_12__[\"getAttributeSlug\"])(display_setting[0]);\n\n        if (display_setting.length > 1) {\n          query.attribute_term = display_setting.slice(1).join(',');\n        }\n      } else if ('featured' === display) {\n        query.featured = 1;\n      } else if ('on_sale' === display) {\n        query.on_sale = 1;\n      }\n\n      if (supportsOrderby(display)) {\n        if ('price_desc' === orderby) {\n          query.orderby = 'price';\n          query.order = 'desc';\n        } else if ('price_asc' === orderby) {\n          query.orderby = 'price';\n          query.order = 'asc';\n        } else if ('title' === orderby) {\n          query.orderby = 'title';\n          query.order = 'asc';\n        } else {\n          query.orderby = orderby;\n        }\n      }\n\n      var query_string = '?';\n\n      var _arr = Object.keys(query);\n\n      for (var _i = 0; _i < _arr.length; _i++) {\n        var key = _arr[_i];\n        query_string += key + '=' + query[key] + '&';\n      }\n\n      var endpoint = '/wc-pb/v3/products' + query_string;\n      return endpoint;\n    }\n    /**\n     * Update the preview with the latest settings.\n     */\n\n  }, {\n    key: \"updatePreview\",\n    value: function updatePreview() {\n      var self = this;\n      var query = this.getQuery();\n      self.setState({\n        loaded: false,\n        query: query\n      });\n      apiFetch({\n        path: query\n      }).then(function (products) {\n        self.setState({\n          products: products,\n          loaded: true\n        });\n      });\n    }\n    /**\n     * Render.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.loaded) {\n        return __('Loading');\n      }\n\n      if (0 === this.state.products.length) {\n        return __('No products found');\n      }\n\n      var classes = 'wc-products-block-preview cols-' + this.props.attributes.columns;\n      var self = this;\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: classes\n      }, this.state.products.map(function (product) {\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(ProductPreview, {\n          key: product.id,\n          product: product,\n          attributes: self.props.attributes\n        });\n      }));\n    }\n  }]);\n\n  return ProductsBlockPreview;\n}(Component);\n/**\n * Information about current block settings rendered in the sidebar.\n */\n\n\nvar ProductsBlockSidebarInfo =\n/*#__PURE__*/\nfunction (_Component6) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(ProductsBlockSidebarInfo, _Component6);\n\n  /**\n   * Constructor\n   */\n  function ProductsBlockSidebarInfo(props) {\n    var _this6;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, ProductsBlockSidebarInfo);\n\n    _this6 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(ProductsBlockSidebarInfo).call(this, props));\n    _this6.state = {\n      categoriesInfo: [],\n      categoriesQuery: '',\n      attributeInfo: false,\n      attributeQuery: '',\n      termsInfo: [],\n      termsQuery: ''\n    };\n    _this6.updateInfo = _this6.updateInfo.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this6)));\n    _this6.getQueries = _this6.getQueries.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this6)));\n    return _this6;\n  }\n  /**\n   * Populate info when component is first loaded.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(ProductsBlockSidebarInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateInfo();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var queries = this.getQueries();\n\n      if (this.state.categoriesQuery !== queries.categories || this.state.attributeQuery !== queries.attribute || this.state.termsQuery !== queries.terms) {\n        this.updateInfo();\n      }\n    }\n    /**\n     * Get endpoints for the current state of the component.\n     *\n     * @return object\n     */\n\n  }, {\n    key: \"getQueries\",\n    value: function getQueries() {\n      var _this$props$attribute2 = this.props.attributes,\n          display = _this$props$attribute2.display,\n          display_setting = _this$props$attribute2.display_setting;\n      var endpoints = {\n        attribute: '',\n        terms: '',\n        categories: ''\n      };\n\n      if ('attribute' === display && display_setting.length) {\n        var ID = Object(_views_attribute_select_jsx__WEBPACK_IMPORTED_MODULE_12__[\"getAttributeID\"])(display_setting[0]);\n        var terms = display_setting.slice(1).join(', ');\n        endpoints.attribute = '/wc-pb/v3/products/attributes/' + ID;\n\n        if (terms.length) {\n          endpoints.terms = '/wc-pb/v3/products/attributes/' + ID + '/terms?include=' + terms;\n        }\n      } else if ('category' === display && display_setting.length) {\n        endpoints.categories = '/wc-pb/v3/products/categories?include=' + display_setting.join(',');\n      }\n\n      return endpoints;\n    }\n    /**\n     * Get the latest info for the sidebar information area.\n     */\n\n  }, {\n    key: \"updateInfo\",\n    value: function updateInfo() {\n      var self = this;\n      var queries = this.getQueries();\n      this.setState({\n        categoriesQuery: queries.categories,\n        attributeQuery: queries.attribute,\n        termsQuery: queries.terms\n      });\n\n      if (queries.categories.length) {\n        apiFetch({\n          path: queries.categories\n        }).then(function (categories) {\n          self.setState({\n            categoriesInfo: categories\n          });\n        });\n      } else {\n        self.setState({\n          categoriesInfo: []\n        });\n      }\n\n      if (queries.attribute.length) {\n        apiFetch({\n          path: queries.attribute\n        }).then(function (attribute) {\n          self.setState({\n            attributeInfo: attribute\n          });\n        });\n      } else {\n        self.setState({\n          attributeInfo: false\n        });\n      }\n\n      if (queries.terms.length) {\n        apiFetch({\n          path: queries.terms\n        }).then(function (terms) {\n          self.setState({\n            termsInfo: terms\n          });\n        });\n      } else {\n        self.setState({\n          termsInfo: []\n        });\n      }\n    }\n    /**\n     * Render.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var descriptions = [// Standard description of selected scope.\n      PRODUCTS_BLOCK_DISPLAY_SETTINGS[this.props.attributes.display].title];\n\n      if (this.state.categoriesInfo.length) {\n        var descriptionText = __('Product categories: ');\n\n        var categories = [];\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.state.categoriesInfo[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var category = _step.value;\n            categories.push(category.name);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        descriptionText += categories.join(', ');\n        descriptions = [descriptionText]; // Description of attributes selected scope.\n      } else if (this.state.attributeInfo) {\n        descriptions = [__('Attribute: ') + this.state.attributeInfo.name];\n\n        if (this.state.termsInfo.length) {\n          var termDescriptionText = __('Terms: ');\n\n          var terms = [];\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = this.state.termsInfo[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var term = _step2.value;\n              terms.push(term.name);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n\n          termDescriptionText += terms.join(', ');\n          descriptions.push(termDescriptionText);\n        }\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", null, descriptions.map(function (description, i) {\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n          className: \"scope-description\",\n          key: i\n        }, description);\n      }));\n    }\n  }]);\n\n  return ProductsBlockSidebarInfo;\n}(Component);\n/**\n * The main products block UI.\n */\n\n\nvar ProductsBlock =\n/*#__PURE__*/\nfunction (_Component7) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default()(ProductsBlock, _Component7);\n\n  /**\n   * Constructor.\n   */\n  function ProductsBlock(props) {\n    var _this7;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_3___default()(this, ProductsBlock);\n\n    _this7 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(ProductsBlock).call(this, props));\n    _this7.getInspectorControls = _this7.getInspectorControls.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this7)));\n    _this7.getToolbarControls = _this7.getToolbarControls.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this7)));\n    _this7.getBlockDescription = _this7.getBlockDescription.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this7)));\n    _this7.getPreview = _this7.getPreview.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this7)));\n    _this7.getSettingsEditor = _this7.getSettingsEditor.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this7)));\n    return _this7;\n  }\n  /**\n   * Get the components for the sidebar settings area that is rendered while focused on a Products block.\n   *\n   * @return Component\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(ProductsBlock, [{\n    key: \"getInspectorControls\",\n    value: function getInspectorControls() {\n      var _this$props = this.props,\n          attributes = _this$props.attributes,\n          setAttributes = _this$props.setAttributes;\n      var rows = attributes.rows,\n          columns = attributes.columns,\n          display = attributes.display,\n          orderby = attributes.orderby;\n      var columnControl = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(RangeControl, {\n        label: __('Columns'),\n        value: columns,\n        onChange: function onChange(value) {\n          return setAttributes({\n            columns: value\n          });\n        },\n        min: wc_product_block_data.min_columns,\n        max: wc_product_block_data.max_columns\n      });\n      var orderControl = null;\n\n      if (supportsOrderby(display)) {\n        orderControl = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(SelectControl, {\n          key: \"query-panel-select\",\n          label: __('Order Products By'),\n          value: orderby,\n          options: [{\n            label: __('Newness - newest first'),\n            value: 'date'\n          }, {\n            label: __('Price - low to high'),\n            value: 'price_asc'\n          }, {\n            label: __('Price - high to low'),\n            value: 'price_desc'\n          }, {\n            label: __('Rating - highest first'),\n            value: 'rating'\n          }, {\n            label: __('Sales - most first'),\n            value: 'popularity'\n          }, {\n            label: __('Title - alphabetical'),\n            value: 'title'\n          }],\n          onChange: function onChange(value) {\n            return setAttributes({\n              orderby: value\n            });\n          }\n        });\n      } // Row settings don't make sense for specific-selected products display.\n\n\n      var rowControl = null;\n\n      if ('specific' !== display) {\n        rowControl = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(RangeControl, {\n          label: __('Rows'),\n          value: rows,\n          onChange: function onChange(value) {\n            return setAttributes({\n              rows: value\n            });\n          },\n          min: wc_product_block_data.min_rows,\n          max: wc_product_block_data.max_rows\n        });\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(InspectorControls, {\n        key: \"inspector\"\n      }, this.getBlockDescription(), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"h3\", null, __('Layout')), columnControl, rowControl, orderControl);\n    }\n    /**\n     * Get the components for the toolbar area that appears on top of the block when focused.\n     *\n     * @return Component\n     */\n\n  }, {\n    key: \"getToolbarControls\",\n    value: function getToolbarControls() {\n      var props = this.props;\n      var attributes = props.attributes,\n          setAttributes = props.setAttributes;\n      var display = attributes.display,\n          display_setting = attributes.display_setting,\n          edit_mode = attributes.edit_mode; // Edit button should not do anything if valid product selection has not been made.\n\n      var shouldDisableEditButton = ['', 'specific', 'category', 'attribute'].includes(display) && !display_setting.length;\n      var editButton = [{\n        icon: 'edit',\n        title: __('Edit'),\n        onClick: shouldDisableEditButton ? function () {} : function () {\n          return setAttributes({\n            edit_mode: !edit_mode\n          });\n        },\n        isActive: edit_mode\n      }];\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(BlockControls, {\n        key: \"controls\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(Toolbar, {\n        controls: editButton\n      }));\n    }\n    /**\n     * Get a description of the current block settings.\n     *\n     * @return Component\n     */\n\n  }, {\n    key: \"getBlockDescription\",\n    value: function getBlockDescription() {\n      var _this$props2 = this.props,\n          attributes = _this$props2.attributes,\n          setAttributes = _this$props2.setAttributes;\n      var display = attributes.display;\n\n      if (!display.length) {\n        return null;\n      }\n\n      function editQuicklinkHandler() {\n        setAttributes({\n          edit_mode: true\n        }); // @todo center in view\n      }\n\n      var editQuickLink = null;\n\n      if (!attributes.edit_mode) {\n        editQuickLink = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n          className: \"wc-products-scope-description--edit-quicklink\"\n        }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(Button, {\n          isLink: true,\n          onClick: editQuicklinkHandler\n        }, __('Edit')));\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: \"wc-products-scope-descriptions\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"div\", {\n        className: \"wc-products-scope-details\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(\"h3\", null, __('Current Source')), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(ProductsBlockSidebarInfo, {\n        attributes: attributes\n      })), editQuickLink);\n    }\n    /**\n     * Get the block preview component for preview mode.\n     *\n     * @return Component\n     */\n\n  }, {\n    key: \"getPreview\",\n    value: function getPreview() {\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(ProductsBlockPreview, {\n        key: \"preview\",\n        attributes: this.props.attributes\n      });\n    }\n    /**\n     * Get the block edit component for edit mode.\n     *\n     * @return Component\n     */\n\n  }, {\n    key: \"getSettingsEditor\",\n    value: function getSettingsEditor() {\n      var _this$props3 = this.props,\n          attributes = _this$props3.attributes,\n          setAttributes = _this$props3.setAttributes;\n      var display = attributes.display,\n          display_setting = attributes.display_setting;\n\n      var update_display_callback = function update_display_callback(value) {\n        // These options have setting screens that need further input from the user, so keep edit mode open.\n        var needsFurtherSettings = ['specific', 'attribute', 'category'];\n\n        if (display !== value) {\n          setAttributes({\n            display: value,\n            display_setting: [],\n            edit_mode: needsFurtherSettings.includes(value)\n          });\n        }\n      };\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(ProductsBlockSettingsEditor, {\n        key: \"settings-editor\",\n        attributes: attributes,\n        selected_display: display,\n        selected_display_setting: display_setting,\n        update_display_callback: update_display_callback,\n        update_display_setting_callback: function update_display_setting_callback(value) {\n          return setAttributes({\n            display_setting: value\n          });\n        },\n        done_callback: function done_callback() {\n          return setAttributes({\n            edit_mode: false\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var attributes = this.props.attributes;\n      var edit_mode = attributes.edit_mode;\n      return [this.getInspectorControls(), this.getToolbarControls(), edit_mode ? this.getSettingsEditor() : this.getPreview()];\n    }\n  }]);\n\n  return ProductsBlock;\n}(Component);\n/**\n * Register and run the products block.\n */\n\n\nregisterBlockType('woocommerce/products', {\n  title: __('Products'),\n  icon: 'screenoptions',\n  category: 'woocommerce',\n  description: __('Display a grid of products from a variety of sources.'),\n  supports: {\n    inserter: false\n  },\n  attributes: {\n    /**\n     * Number of columns.\n     */\n    columns: {\n      type: 'number',\n      default: wc_product_block_data.default_columns\n    },\n\n    /**\n     * Number of rows.\n     */\n    rows: {\n      type: 'number',\n      default: wc_product_block_data.default_rows\n    },\n\n    /**\n     * What types of products to display. 'all', 'specific', or 'category'.\n     */\n    display: {\n      type: 'string',\n      default: ''\n    },\n\n    /**\n     * Which products to display if 'display' is 'specific' or 'category'. Array of product ids or category slugs depending on setting.\n     */\n    display_setting: {\n      type: 'array',\n      default: []\n    },\n\n    /**\n     * How to order the products: 'date', 'popularity', 'price_asc', 'price_desc' 'rating', 'title'.\n     */\n    orderby: {\n      type: 'string',\n      default: 'date'\n    },\n\n    /**\n     * Whether the block is in edit or preview mode.\n     */\n    edit_mode: {\n      type: 'boolean',\n      default: true\n    }\n  },\n\n  /**\n   * Renders and manages the block.\n   */\n  edit: function edit(props) {\n    return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(ProductsBlock, props);\n  },\n\n  /**\n   * Save the block content in the post content. Block content is saved as a products shortcode.\n   *\n   * @return string\n   */\n  save: function save(props) {\n    var _props$attributes = props.attributes,\n        rows = _props$attributes.rows,\n        columns = _props$attributes.columns,\n        display = _props$attributes.display,\n        display_setting = _props$attributes.display_setting,\n        orderby = _props$attributes.orderby;\n    var shortcode_atts = new Map();\n\n    if ('specific' !== display) {\n      shortcode_atts.set('limit', rows * columns);\n    }\n\n    shortcode_atts.set('columns', columns);\n\n    if ('specific' === display) {\n      shortcode_atts.set('ids', display_setting.join(','));\n    } else if ('category' === display) {\n      shortcode_atts.set('category', display_setting.join(','));\n    } else if ('featured' === display) {\n      shortcode_atts.set('visibility', 'featured');\n    } else if ('on_sale' === display) {\n      shortcode_atts.set('on_sale', '1');\n    } else if ('best_selling' === display) {\n      shortcode_atts.set('best_selling', '1');\n    } else if ('top_rated' === display) {\n      shortcode_atts.set('top_rated', '1');\n    } else if ('attribute' === display) {\n      var attribute = display_setting.length ? Object(_views_attribute_select_jsx__WEBPACK_IMPORTED_MODULE_12__[\"getAttributeSlug\"])(display_setting[0]) : '';\n      var terms = display_setting.length > 1 ? display_setting.slice(1).join(',') : '';\n      shortcode_atts.set('attribute', attribute);\n\n      if (terms.length) {\n        shortcode_atts.set('terms', terms);\n      }\n    }\n\n    if (supportsOrderby(display)) {\n      if ('price_desc' === orderby) {\n        shortcode_atts.set('orderby', 'price');\n        shortcode_atts.set('order', 'DESC');\n      } else if ('price_asc' === orderby) {\n        shortcode_atts.set('orderby', 'price');\n        shortcode_atts.set('order', 'ASC');\n      } else if ('date' === orderby) {\n        shortcode_atts.set('orderby', 'date');\n        shortcode_atts.set('order', 'DESC');\n      } else {\n        shortcode_atts.set('orderby', orderby);\n      }\n    } // Build the shortcode string out of the set shortcode attributes.\n\n\n    var shortcode = '[products';\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = shortcode_atts[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var _step3$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_step3.value, 2),\n            key = _step3$value[0],\n            value = _step3$value[1];\n\n        shortcode += ' ' + key + '=\"' + value + '\"';\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n\n    shortcode += ']';\n    return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"])(RawHTML, null, shortcode);\n  }\n});\n\n//# sourceURL=webpack:///./assets/js/legacy/products-block.jsx?");

/***/ }),

/***/ "./assets/js/legacy/products-block.scss":
/*!**********************************************!*\
  !*** ./assets/js/legacy/products-block.scss ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\nvar content = __webpack_require__(/*! !../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js??ref--5-2!../../../node_modules/postcss-loader/src!../../../node_modules/sass-loader/lib/loader.js??ref--5-4!./products-block.scss */ \"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/lib/loader.js?!./assets/js/legacy/products-block.scss\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ../../../node_modules/style-loader/lib/addStyles.js */ \"./node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) {}\n\n//# sourceURL=webpack:///./assets/js/legacy/products-block.scss?");

/***/ }),

/***/ "./assets/js/legacy/views/attribute-select.jsx":
/*!*****************************************************!*\
  !*** ./assets/js/legacy/views/attribute-select.jsx ***!
  \*****************************************************/
/*! exports provided: getAttributeIdentifier, getAttributeSlug, getAttributeID, ProductsAttributeSelect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAttributeIdentifier\", function() { return getAttributeIdentifier; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAttributeSlug\", function() { return getAttributeSlug; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getAttributeID\", function() { return getAttributeID; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProductsAttributeSelect\", function() { return ProductsAttributeSelect; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @wordpress/element */ \"@wordpress/element\");\n/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nvar __ = wp.i18n.__;\nvar Component = wp.element.Component;\nvar Dashicon = wp.components.Dashicon;\nvar _wp = wp,\n    apiFetch = _wp.apiFetch;\n/**\n * Get the identifier for an attribute. The identifier can be used to determine\n * the slug or the ID of the attribute.\n *\n * @param string slug The attribute slug.\n * @param int|numeric string id The attribute ID.\n */\n\nfunction getAttributeIdentifier(slug, id) {\n  return slug + ',' + id;\n}\n/**\n * Get the attribute slug from an identifier.\n *\n * @param string identifier The attribute identifier.\n * @return string\n */\n\nfunction getAttributeSlug(identifier) {\n  return identifier.split(',')[0];\n}\n/**\n * Get the attribute ID from an identifier.\n *\n * @param string identifier The attribute identifier.\n * @return numeric string\n */\n\nfunction getAttributeID(identifier) {\n  return identifier.split(',')[1];\n}\n/**\n * When the display mode is 'Attribute' search for and select product attributes to pull products from.\n */\n\nvar ProductsAttributeSelect =\n/*#__PURE__*/\nfunction (_Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(ProductsAttributeSelect, _Component);\n\n  /**\n   * Constructor.\n   */\n  function ProductsAttributeSelect(props) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, ProductsAttributeSelect);\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(ProductsAttributeSelect).call(this, props));\n    /**\n     * The first item in props.selected_display_setting is the attribute slug and id separated by a comma.\n     * This is to work around limitations in the API which sometimes requires a slug and sometimes an id.\n     * The rest of the elements in selected_display_setting are the term ids for any selected terms.\n     */\n\n    _this.state = {\n      selectedAttribute: props.selected_display_setting.length ? props.selected_display_setting[0] : '',\n      selectedTerms: props.selected_display_setting.length > 1 ? props.selected_display_setting.slice(1) : [],\n      filterQuery: ''\n    };\n    _this.setSelectedAttribute = _this.setSelectedAttribute.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this)));\n    _this.addTerm = _this.addTerm.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this)));\n    _this.removeTerm = _this.removeTerm.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this)));\n    return _this;\n  }\n  /**\n   * Set the selected attribute.\n   *\n   * @param identifier string Attribute slug and id separated by a comma.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(ProductsAttributeSelect, [{\n    key: \"setSelectedAttribute\",\n    value: function setSelectedAttribute(identifier) {\n      this.setState({\n        selectedAttribute: identifier,\n        selectedTerms: []\n      });\n      this.props.update_display_setting_callback([identifier]);\n    }\n    /**\n     * Add a term to the selected attribute's terms.\n     *\n     * @param id int Term id.\n     */\n\n  }, {\n    key: \"addTerm\",\n    value: function addTerm(id) {\n      var terms = this.state.selectedTerms;\n      terms.push(id);\n      this.setState({\n        selectedTerms: terms\n      });\n      var displaySetting = [this.state.selectedAttribute];\n      displaySetting = displaySetting.concat(terms);\n      this.props.update_display_setting_callback(displaySetting);\n    }\n    /**\n     * Remove a term from the selected attribute's terms.\n     *\n     * @param id int Term id.\n     */\n\n  }, {\n    key: \"removeTerm\",\n    value: function removeTerm(id) {\n      var newTerms = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.state.selectedTerms[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var termId = _step.value;\n\n          if (termId !== id) {\n            newTerms.push(termId);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.setState({\n        selectedTerms: newTerms\n      });\n      var displaySetting = [this.state.selectedAttribute];\n      displaySetting = displaySetting.concat(newTerms);\n      this.props.update_display_setting_callback(displaySetting);\n    }\n    /**\n     * Update the search results when typing in the attributes box.\n     *\n     * @param evt Event object\n     */\n\n  }, {\n    key: \"updateFilter\",\n    value: function updateFilter(evt) {\n      this.setState({\n        filterQuery: evt.target.value\n      });\n    }\n    /**\n     * Render the whole section.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        className: \"wc-products-list-card wc-products-list-card--taxonomy wc-products-list-card--taxonomy-atributes\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(ProductAttributeFilter, {\n        updateFilter: this.updateFilter.bind(this)\n      }), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(ProductAttributeList, {\n        selectedAttribute: this.state.selectedAttribute,\n        selectedTerms: this.state.selectedTerms,\n        filterQuery: this.state.filterQuery,\n        setSelectedAttribute: this.setSelectedAttribute.bind(this),\n        addTerm: this.addTerm.bind(this),\n        removeTerm: this.removeTerm.bind(this)\n      }));\n    }\n  }]);\n\n  return ProductsAttributeSelect;\n}(Component);\n/**\n * Search area for filtering through the attributes list.\n */\n\nvar ProductAttributeFilter = function ProductAttributeFilter(props) {\n  return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n    className: \"wc-products-list-card__input-wrapper\"\n  }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(Dashicon, {\n    icon: \"search\"\n  }), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"input\", {\n    className: \"wc-products-list-card__search\",\n    type: \"search\",\n    placeholder: __('Search for attributes'),\n    onChange: props.updateFilter\n  }));\n};\n/**\n * List of attributes.\n */\n\n\nvar ProductAttributeList =\n/*#__PURE__*/\nfunction (_Component2) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(ProductAttributeList, _Component2);\n\n  /**\n   * Constructor\n   */\n  function ProductAttributeList(props) {\n    var _this2;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, ProductAttributeList);\n\n    _this2 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(ProductAttributeList).call(this, props));\n    _this2.state = {\n      attributes: [],\n      loaded: false,\n      query: ''\n    };\n    _this2.updatePreview = _this2.updatePreview.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2)));\n    _this2.getQuery = _this2.getQuery.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this2)));\n    return _this2;\n  }\n  /**\n   * Get the preview when component is first loaded.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(ProductAttributeList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.getQuery() !== this.state.query) {\n        this.updatePreview();\n      }\n    }\n    /**\n     * Update the preview when component is updated.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.getQuery() !== this.state.query && this.state.loaded) {\n        this.updatePreview();\n      }\n    }\n    /**\n     * Get the endpoint for the current state of the component.\n     *\n     * @return string\n     */\n\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      var endpoint = '/wc-pb/v3/products/attributes';\n      return endpoint;\n    }\n    /**\n     * Update the preview with the latest settings.\n     */\n\n  }, {\n    key: \"updatePreview\",\n    value: function updatePreview() {\n      var self = this;\n      var query = this.getQuery();\n      self.setState({\n        loaded: false\n      });\n      apiFetch({\n        path: query\n      }).then(function (attributes) {\n        self.setState({\n          attributes: attributes,\n          loaded: true,\n          query: query\n        });\n      });\n    }\n    /**\n     * Render.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          selectedAttribute = _this$props.selectedAttribute,\n          filterQuery = _this$props.filterQuery,\n          selectedTerms = _this$props.selectedTerms,\n          setSelectedAttribute = _this$props.setSelectedAttribute,\n          addTerm = _this$props.addTerm,\n          removeTerm = _this$props.removeTerm;\n\n      if (!this.state.loaded) {\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"ul\", null, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"li\", null, __('Loading')));\n      }\n\n      if (0 === this.state.attributes.length) {\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"ul\", null, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"li\", null, __('No attributes found')));\n      }\n\n      var filter = filterQuery.toLowerCase();\n      var attributeElements = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.state.attributes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var attribute = _step2.value;\n\n          // Filter out attributes that don't match the search query.\n          if (filter.length && -1 === attribute.name.toLowerCase().indexOf(filter)) {\n            continue;\n          }\n\n          attributeElements.push(Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(ProductAttributeElement, {\n            attribute: attribute,\n            selectedAttribute: selectedAttribute,\n            selectedTerms: selectedTerms,\n            setSelectedAttribute: setSelectedAttribute,\n            addTerm: addTerm,\n            removeTerm: removeTerm\n          }));\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        className: \"wc-products-list-card__results\"\n      }, attributeElements);\n    }\n  }]);\n\n  return ProductAttributeList;\n}(Component);\n/**\n * One product attribute.\n */\n\n\nvar ProductAttributeElement =\n/*#__PURE__*/\nfunction (_Component3) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(ProductAttributeElement, _Component3);\n\n  function ProductAttributeElement(props) {\n    var _this3;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, ProductAttributeElement);\n\n    _this3 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(ProductAttributeElement).call(this, props));\n    _this3.handleAttributeChange = _this3.handleAttributeChange.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this3)));\n    _this3.handleTermChange = _this3.handleTermChange.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this3)));\n    return _this3;\n  }\n  /**\n   * Propagate and reset values when the selected attribute is changed.\n   *\n   * @param evt Event object\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(ProductAttributeElement, [{\n    key: \"handleAttributeChange\",\n    value: function handleAttributeChange(evt) {\n      if (!evt.target.checked) {\n        return;\n      }\n\n      this.props.setSelectedAttribute(evt.target.value);\n    }\n    /**\n     * Add or remove selected terms.\n     *\n     * @param evt Event object\n     */\n\n  }, {\n    key: \"handleTermChange\",\n    value: function handleTermChange(evt) {\n      if (evt.target.checked) {\n        this.props.addTerm(evt.target.value);\n      } else {\n        this.props.removeTerm(evt.target.value);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isSelected = this.props.selectedAttribute === getAttributeIdentifier(this.props.attribute.slug, this.props.attribute.id);\n      var attributeTerms = null;\n\n      if (isSelected) {\n        attributeTerms = Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(AttributeTerms, {\n          attribute: this.props.attribute,\n          selectedTerms: this.props.selectedTerms,\n          addTerm: this.props.addTerm,\n          removeTerm: this.props.removeTerm\n        });\n      }\n\n      var cssClasses = ['wc-products-list-card--taxonomy-atributes__atribute'];\n\n      if (isSelected) {\n        cssClasses.push('wc-products-list-card__accordion-open');\n      }\n\n      var valueId = getAttributeIdentifier(this.props.attribute.slug, this.props.attribute.id);\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        className: cssClasses.join(' ')\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", null, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"label\", {\n        className: \"wc-products-list-card__content\",\n        htmlFor: \"attribute-\".concat(valueId)\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"input\", {\n        type: \"radio\",\n        id: \"attribute-\".concat(valueId),\n        value: valueId,\n        onChange: this.handleAttributeChange,\n        checked: isSelected\n      }), this.props.attribute.name)), attributeTerms);\n    }\n  }]);\n\n  return ProductAttributeElement;\n}(Component);\n/**\n * The list of terms in an attribute.\n */\n\n\nvar AttributeTerms =\n/*#__PURE__*/\nfunction (_Component4) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(AttributeTerms, _Component4);\n\n  /**\n   * Constructor\n   */\n  function AttributeTerms(props) {\n    var _this4;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, AttributeTerms);\n\n    _this4 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(AttributeTerms).call(this, props));\n    _this4.state = {\n      terms: [],\n      loaded: false,\n      query: ''\n    };\n    _this4.updatePreview = _this4.updatePreview.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this4)));\n    _this4.getQuery = _this4.getQuery.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5___default()(_this4)));\n    return _this4;\n  }\n  /**\n   * Get the preview when component is first loaded.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(AttributeTerms, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.getQuery() !== this.state.query) {\n        this.updatePreview();\n      }\n    }\n    /**\n     * Update the preview when component is updated.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.getQuery() !== this.state.query && this.state.loaded) {\n        this.updatePreview();\n      }\n    }\n    /**\n     * Get the endpoint for the current state of the component.\n     *\n     * @return string\n     */\n\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      var endpoint = '/wc-pb/v3/products/attributes/' + this.props.attribute.id + '/terms';\n      return endpoint;\n    }\n    /**\n     * Update the preview with the latest settings.\n     */\n\n  }, {\n    key: \"updatePreview\",\n    value: function updatePreview() {\n      var self = this;\n      var query = this.getQuery();\n      self.setState({\n        loaded: false\n      });\n      apiFetch({\n        path: query\n      }).then(function (terms) {\n        self.setState({\n          terms: terms,\n          loaded: true,\n          query: query\n        });\n      });\n    }\n    /**\n     * Render.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          selectedTerms = _this$props2.selectedTerms,\n          addTerm = _this$props2.addTerm,\n          removeTerm = _this$props2.removeTerm;\n\n      if (!this.state.loaded) {\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"ul\", null, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"li\", null, __('Loading')));\n      }\n\n      if (0 === this.state.terms.length) {\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"ul\", null, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"li\", null, __('No terms found')));\n      }\n      /**\n       * Add or remove selected terms.\n       *\n       * @param evt Event object\n       */\n\n\n      function handleTermChange(evt) {\n        if (evt.target.checked) {\n          addTerm(evt.target.value);\n        } else {\n          removeTerm(evt.target.value);\n        }\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"ul\", null, this.state.terms.map(function (term, i) {\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"li\", {\n          className: \"wc-products-list-card__item\",\n          key: i\n        }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"label\", {\n          className: \"wc-products-list-card__content\",\n          htmlFor: \"term-\".concat(term.id)\n        }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"input\", {\n          type: \"checkbox\",\n          id: \"term-\".concat(term.id),\n          value: term.id,\n          onChange: handleTermChange,\n          checked: selectedTerms.includes(String(term.id))\n        }), term.name, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"span\", {\n          className: \"wc-products-list-card__taxonomy-count\"\n        }, term.count)));\n      }));\n    }\n  }]);\n\n  return AttributeTerms;\n}(Component);\n\n//# sourceURL=webpack:///./assets/js/legacy/views/attribute-select.jsx?");

/***/ }),

/***/ "./assets/js/legacy/views/category-select.jsx":
/*!****************************************************!*\
  !*** ./assets/js/legacy/views/category-select.jsx ***!
  \****************************************************/
/*! exports provided: ProductsCategorySelect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProductsCategorySelect\", function() { return ProductsCategorySelect; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @wordpress/element */ \"@wordpress/element\");\n/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nvar __ = wp.i18n.__;\nvar Component = wp.element.Component;\nvar Dashicon = wp.components.Dashicon;\nvar _wp = wp,\n    apiFetch = _wp.apiFetch;\n/**\n * When the display mode is 'Product category' search for and select product categories to pull products from.\n */\n\nvar ProductsCategorySelect =\n/*#__PURE__*/\nfunction (_Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ProductsCategorySelect, _Component);\n\n  /**\n   * Constructor.\n   */\n  function ProductsCategorySelect(props) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ProductsCategorySelect);\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(ProductsCategorySelect).call(this, props));\n    _this.state = {\n      selectedCategories: props.selected_display_setting,\n      openAccordion: [],\n      filterQuery: '',\n      firstLoad: true\n    };\n    _this.checkboxChange = _this.checkboxChange.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this)));\n    _this.accordionToggle = _this.accordionToggle.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this)));\n    _this.filterResults = _this.filterResults.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this)));\n    _this.setFirstLoad = _this.setFirstLoad.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this)));\n    return _this;\n  }\n  /**\n   * Handle checkbox toggle.\n   *\n   * @param Checked? boolean checked\n   * @param Categories array categories\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ProductsCategorySelect, [{\n    key: \"checkboxChange\",\n    value: function checkboxChange(checked, categories) {\n      var selectedCategories = this.state.selectedCategories;\n      selectedCategories = selectedCategories.filter(function (category) {\n        return !categories.includes(category);\n      });\n\n      if (checked) {\n        var _selectedCategories;\n\n        (_selectedCategories = selectedCategories).push.apply(_selectedCategories, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(categories));\n      }\n\n      this.setState({\n        selectedCategories: selectedCategories\n      });\n      this.props.update_display_setting_callback(selectedCategories);\n    }\n    /**\n     * Handle accordion toggle.\n     *\n     * @param Category ID category\n     */\n\n  }, {\n    key: \"accordionToggle\",\n    value: function accordionToggle(category) {\n      var openAccordions = this.state.openAccordion;\n\n      if (openAccordions.includes(category)) {\n        openAccordions = openAccordions.filter(function (c) {\n          return c !== category;\n        });\n      } else {\n        openAccordions.push(category);\n      }\n\n      this.setState({\n        openAccordion: openAccordions\n      });\n    }\n    /**\n     * Filter categories.\n     *\n     * @param Event object evt\n     */\n\n  }, {\n    key: \"filterResults\",\n    value: function filterResults(evt) {\n      this.setState({\n        filterQuery: evt.target.value\n      });\n    }\n    /**\n     * Update firstLoad state.\n     *\n     * @param Booolean loaded\n     */\n\n  }, {\n    key: \"setFirstLoad\",\n    value: function setFirstLoad(loaded) {\n      this.setState({\n        firstLoad: !!loaded\n      });\n    }\n    /**\n     * Render the list of categories and the search input.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"div\", {\n        className: \"wc-products-list-card wc-products-list-card--taxonomy wc-products-list-card--taxonomy-category\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(ProductCategoryFilter, {\n        filterResults: this.filterResults\n      }), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(ProductCategoryList, {\n        filterQuery: this.state.filterQuery,\n        selectedCategories: this.state.selectedCategories,\n        checkboxChange: this.checkboxChange,\n        accordionToggle: this.accordionToggle,\n        openAccordion: this.state.openAccordion,\n        firstLoad: this.state.firstLoad,\n        setFirstLoad: this.setFirstLoad\n      }));\n    }\n  }]);\n\n  return ProductsCategorySelect;\n}(Component);\n/**\n * The category search input.\n */\n\nvar ProductCategoryFilter = function ProductCategoryFilter(_ref) {\n  var filterResults = _ref.filterResults;\n  return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"div\", {\n    className: \"wc-products-list-card__input-wrapper\"\n  }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(Dashicon, {\n    icon: \"search\"\n  }), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"input\", {\n    className: \"wc-products-list-card__search\",\n    type: \"search\",\n    placeholder: __('Search for categories'),\n    onChange: filterResults\n  }));\n};\n/**\n * Fetch and build a tree of product categories.\n */\n\n\nvar ProductCategoryList =\n/*#__PURE__*/\nfunction (_Component2) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ProductCategoryList, _Component2);\n\n  /**\n   * Constructor\n   */\n  function ProductCategoryList(props) {\n    var _this2;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ProductCategoryList);\n\n    _this2 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(ProductCategoryList).call(this, props));\n    _this2.state = {\n      categories: [],\n      loaded: false,\n      query: ''\n    };\n    _this2.updatePreview = _this2.updatePreview.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this2)));\n    _this2.getQuery = _this2.getQuery.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default()(_this2)));\n    return _this2;\n  }\n  /**\n   * Get the preview when component is first loaded.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ProductCategoryList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.getQuery() !== this.state.query) {\n        this.updatePreview();\n      }\n    }\n    /**\n     * Update the preview when component is updated.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.getQuery() !== this.state.query && this.state.loaded) {\n        this.updatePreview();\n      }\n    }\n    /**\n     * Get the endpoint for the current state of the component.\n     *\n     * @return string\n     */\n\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      var endpoint = '/wc-pb/v3/products/categories';\n      return endpoint;\n    }\n    /**\n     * Update the preview with the latest settings.\n     */\n\n  }, {\n    key: \"updatePreview\",\n    value: function updatePreview() {\n      var self = this;\n      var query = this.getQuery();\n      self.setState({\n        loaded: false\n      });\n      apiFetch({\n        path: query\n      }).then(function (categories) {\n        self.setState({\n          categories: categories,\n          loaded: true,\n          query: query\n        });\n      });\n    }\n    /**\n     * Render.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          filterQuery = _this$props.filterQuery,\n          selectedCategories = _this$props.selectedCategories,\n          checkboxChange = _this$props.checkboxChange,\n          accordionToggle = _this$props.accordionToggle,\n          openAccordion = _this$props.openAccordion,\n          firstLoad = _this$props.firstLoad,\n          setFirstLoad = _this$props.setFirstLoad;\n\n      if (!this.state.loaded) {\n        return __('Loading');\n      }\n\n      if (0 === this.state.categories.length) {\n        return __('No categories found');\n      }\n\n      var handleCategoriesToCheck = function handleCategoriesToCheck(evt, parent, categories) {\n        var ids = getCategoryChildren(parent, categories).map(function (category) {\n          return category.id;\n        });\n        ids.push(parent.id);\n        checkboxChange(evt.target.checked, ids);\n      };\n\n      var getCategoryChildren = function getCategoryChildren(parent, categories) {\n        var children = [];\n        categories.filter(function (category) {\n          return category.parent === parent.id;\n        }).forEach(function (category) {\n          children.push(category);\n          children.push.apply(children, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(getCategoryChildren(category, categories)));\n        });\n        return children;\n      };\n\n      var categoryHasChildren = function categoryHasChildren(parent, categories) {\n        return !!getCategoryChildren(parent, categories).length;\n      };\n\n      var isIndeterminate = function isIndeterminate(category, categories) {\n        // Currect category selected?\n        if (selectedCategories.includes(category.id)) {\n          return false;\n        } // Has children?\n\n\n        var children = getCategoryChildren(category, categories).map(function (cat) {\n          return cat.id;\n        });\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var child = _step.value;\n\n            if (selectedCategories.includes(child)) {\n              return true;\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return false;\n      };\n\n      var AccordionButton = function AccordionButton(_ref2) {\n        var category = _ref2.category,\n            categories = _ref2.categories;\n        var icon = 'arrow-down-alt2';\n\n        if (openAccordion.includes(category.id)) {\n          icon = 'arrow-up-alt2';\n        }\n\n        var style = null;\n\n        if (!categoryHasChildren(category, categories)) {\n          style = {\n            visibility: 'hidden'\n          };\n        }\n\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"button\", {\n          onClick: function onClick() {\n            return accordionToggle(category.id);\n          },\n          className: \"wc-products-list-card__accordion-button\",\n          style: style,\n          type: \"button\"\n        }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(Dashicon, {\n          icon: icon\n        }));\n      };\n\n      var CategoryTree = function CategoryTree(_ref3) {\n        var categories = _ref3.categories,\n            parent = _ref3.parent;\n        var filteredCategories = categories.filter(function (category) {\n          return category.parent === parent;\n        });\n\n        if (firstLoad && selectedCategories.length > 0) {\n          categoriesData.filter(function (category) {\n            return category.parent === 0;\n          }).forEach(function (category) {\n            var children = getCategoryChildren(category, categoriesData);\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = children[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var child = _step2.value;\n\n                if (selectedCategories.includes(child.id) && !openAccordion.includes(category.id)) {\n                  accordionToggle(category.id);\n                  break;\n                }\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                  _iterator2.return();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n          });\n          setFirstLoad(false);\n        }\n\n        return filteredCategories.length > 0 && Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"ul\", null, filteredCategories.map(function (category) {\n          return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"li\", {\n            key: category.id,\n            className: openAccordion.includes(category.id) ? 'wc-products-list-card__item wc-products-list-card__accordion-open' : 'wc-products-list-card__item'\n          }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"label\", {\n            className: 0 === category.parent ? 'wc-products-list-card__content' : '',\n            htmlFor: 'product-category-' + category.id\n          }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"input\", {\n            type: \"checkbox\",\n            id: 'product-category-' + category.id,\n            value: category.id,\n            checked: selectedCategories.includes(category.id),\n            onChange: function onChange(evt) {\n              return handleCategoriesToCheck(evt, category, categories);\n            },\n            ref: function ref(el) {\n              return el && (el.indeterminate = isIndeterminate(category, categories));\n            }\n          }), \" \", category.name, 0 === category.parent && Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(AccordionButton, {\n            category: category,\n            categories: categories\n          }), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"span\", {\n            className: \"wc-products-list-card__taxonomy-count\"\n          }, category.count)), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(CategoryTree, {\n            categories: categories,\n            parent: category.id\n          }));\n        }));\n      };\n\n      var categoriesData = this.state.categories;\n\n      if ('' !== filterQuery) {\n        categoriesData = categoriesData.filter(function (category) {\n          return category.slug.includes(filterQuery.toLowerCase());\n        });\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(\"div\", {\n        className: \"wc-products-list-card__results\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_7__[\"createElement\"])(CategoryTree, {\n        categories: categoriesData,\n        parent: 0\n      }));\n    }\n  }]);\n\n  return ProductCategoryList;\n}(Component);\n\n//# sourceURL=webpack:///./assets/js/legacy/views/category-select.jsx?");

/***/ }),

/***/ "./assets/js/legacy/views/specific-select.jsx":
/*!****************************************************!*\
  !*** ./assets/js/legacy/views/specific-select.jsx ***!
  \****************************************************/
/*! exports provided: ProductsSpecificSelect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProductsSpecificSelect\", function() { return ProductsSpecificSelect; });\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @wordpress/element */ \"@wordpress/element\");\n/* harmony import */ var _wordpress_element__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nvar __ = wp.i18n.__;\nvar Component = wp.element.Component;\nvar Dashicon = wp.components.Dashicon;\nvar _wp = wp,\n    apiFetch = _wp.apiFetch;\n/**\n * Product data cache.\n * Reduces the number of API calls and makes UI smoother and faster.\n */\n\nvar PRODUCT_DATA = {};\n/**\n * When the display mode is 'Specific products' search for and add products to the block.\n */\n\nvar ProductsSpecificSelect =\n/*#__PURE__*/\nfunction (_Component) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ProductsSpecificSelect, _Component);\n\n  /**\n   * Constructor.\n   */\n  function ProductsSpecificSelect(props) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ProductsSpecificSelect);\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(ProductsSpecificSelect).call(this, props));\n    _this.state = {\n      selectedProducts: props.selected_display_setting || []\n    };\n    return _this;\n  }\n  /**\n   * Add a product to the list of selected products.\n   *\n   * @param id int Product ID.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ProductsSpecificSelect, [{\n    key: \"addOrRemoveProduct\",\n    value: function addOrRemoveProduct(id) {\n      var selectedProducts = this.state.selectedProducts;\n\n      if (!selectedProducts.includes(id)) {\n        selectedProducts.push(id);\n      } else {\n        selectedProducts = selectedProducts.filter(function (product) {\n          return product !== id;\n        });\n      }\n\n      this.setState({\n        selectedProducts: selectedProducts\n      });\n      /**\n       * We need to copy the existing data into a new array.\n       * We can't just push the new product onto the end of the existing array because Gutenberg seems\n       * to do some sort of check by reference to determine whether to *actually* update the attribute\n       * and will not update it if we just pass back the same array with an extra element on the end.\n       */\n\n      this.props.update_display_setting_callback(selectedProducts.slice());\n    }\n    /**\n     * Render the product specific select screen.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        className: \"wc-products-list-card wc-products-list-card--specific\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(ProductsSpecificSearchField, {\n        addOrRemoveProductCallback: this.addOrRemoveProduct.bind(this),\n        selectedProducts: this.state.selectedProducts\n      }), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(ProductSpecificSelectedProducts, {\n        columns: this.props.attributes.columns,\n        productIds: this.state.selectedProducts,\n        addOrRemoveProduct: this.addOrRemoveProduct.bind(this)\n      }));\n    }\n  }]);\n\n  return ProductsSpecificSelect;\n}(Component);\n/**\n * Product search area\n */\n\nvar ProductsSpecificSearchField =\n/*#__PURE__*/\nfunction (_Component2) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ProductsSpecificSearchField, _Component2);\n\n  /**\n   * Constructor.\n   */\n  function ProductsSpecificSearchField(props) {\n    var _this2;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ProductsSpecificSearchField);\n\n    _this2 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(ProductsSpecificSearchField).call(this, props));\n    _this2.state = {\n      searchText: '',\n      dropdownOpen: false\n    };\n    _this2.updateSearchResults = _this2.updateSearchResults.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this2)));\n    _this2.setWrapperRef = _this2.setWrapperRef.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this2)));\n    _this2.handleClickOutside = _this2.handleClickOutside.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this2)));\n    _this2.isDropdownOpen = _this2.isDropdownOpen.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this2)));\n    return _this2;\n  }\n  /**\n   * Hook in the listener for closing menu when clicked outside.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ProductsSpecificSearchField, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('mousedown', this.handleClickOutside);\n    }\n    /**\n     * Remove the listener for closing menu when clicked outside.\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('mousedown', this.handleClickOutside);\n    }\n    /**\n     * Set the wrapper reference.\n     *\n     * @param node DOMNode\n     */\n\n  }, {\n    key: \"setWrapperRef\",\n    value: function setWrapperRef(node) {\n      this.wrapperRef = node;\n    }\n    /**\n     * Close the menu when user clicks outside the search area.\n     */\n\n  }, {\n    key: \"handleClickOutside\",\n    value: function handleClickOutside(event) {\n      if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n        this.setState({\n          searchText: ''\n        });\n      }\n    }\n  }, {\n    key: \"isDropdownOpen\",\n    value: function isDropdownOpen(isOpen) {\n      this.setState({\n        dropdownOpen: !!isOpen\n      });\n    }\n    /**\n     * Event handler for updating results when text is typed into the input.\n     *\n     * @param evt Event object.\n     */\n\n  }, {\n    key: \"updateSearchResults\",\n    value: function updateSearchResults(evt) {\n      this.setState({\n        searchText: evt.target.value\n      });\n    }\n    /**\n     * Render the product search UI.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var divClass = 'wc-products-list-card__search-wrapper';\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        className: divClass + (this.state.dropdownOpen ? ' ' + divClass + '--with-results' : ''),\n        ref: this.setWrapperRef\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        className: \"wc-products-list-card__input-wrapper\"\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(Dashicon, {\n        icon: \"search\"\n      }), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"input\", {\n        type: \"search\",\n        className: \"wc-products-list-card__search\",\n        value: this.state.searchText,\n        placeholder: __('Search for products to display'),\n        onChange: this.updateSearchResults\n      })), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(ProductSpecificSearchResults, {\n        searchString: this.state.searchText,\n        addOrRemoveProductCallback: this.props.addOrRemoveProductCallback,\n        selectedProducts: this.props.selectedProducts,\n        isDropdownOpenCallback: this.isDropdownOpen\n      }));\n    }\n  }]);\n\n  return ProductsSpecificSearchField;\n}(Component);\n/**\n * Render product search results based on the text entered into the textbox.\n */\n\n\nvar ProductSpecificSearchResults =\n/*#__PURE__*/\nfunction (_Component3) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ProductSpecificSearchResults, _Component3);\n\n  /**\n   * Constructor.\n   */\n  function ProductSpecificSearchResults(props) {\n    var _this3;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ProductSpecificSearchResults);\n\n    _this3 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(ProductSpecificSearchResults).call(this, props));\n    _this3.state = {\n      products: [],\n      query: '',\n      loaded: false\n    };\n    _this3.updateResults = _this3.updateResults.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this3)));\n    _this3.getQuery = _this3.getQuery.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this3)));\n    return _this3;\n  }\n  /**\n   * Get the preview when component is first loaded.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ProductSpecificSearchResults, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateResults();\n    }\n    /**\n     * Update the preview when component is updated.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.getQuery() !== this.state.query) {\n        this.updateResults();\n      }\n    }\n    /**\n     * Get the endpoint for the current state of the component.\n     *\n     * @return string\n     */\n\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      if (!this.props.searchString.length) {\n        return '';\n      }\n\n      return '/wc-pb/v3/products?per_page=10&status=publish&search=' + this.props.searchString;\n    }\n    /**\n     * Update the search results.\n     */\n\n  }, {\n    key: \"updateResults\",\n    value: function updateResults() {\n      var self = this;\n      var query = this.getQuery();\n      self.setState({\n        query: query,\n        loaded: false\n      });\n\n      if (query.length) {\n        apiFetch({\n          path: query\n        }).then(function (products) {\n          // Only update the results if they are for the latest query.\n          if (query === self.getQuery()) {\n            self.setState({\n              products: products,\n              loaded: true\n            });\n          }\n        });\n      } else {\n        self.setState({\n          products: [],\n          loaded: true\n        });\n      }\n    }\n    /**\n     * Render.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.loaded || !this.state.query.length) {\n        return null;\n      }\n\n      if (0 === this.state.products.length) {\n        return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"span\", {\n          className: \"wc-products-list-card__search-no-results\"\n        }, \" \", __('No products found'), \" \");\n      } // Populate the cache.\n\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.state.products[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var product = _step.value;\n          PRODUCT_DATA[product.id] = product;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(ProductSpecificSearchResultsDropdown, {\n        products: this.state.products,\n        addOrRemoveProductCallback: this.props.addOrRemoveProductCallback,\n        selectedProducts: this.props.selectedProducts,\n        isDropdownOpenCallback: this.props.isDropdownOpenCallback\n      });\n    }\n  }]);\n\n  return ProductSpecificSearchResults;\n}(Component);\n/**\n * The dropdown of search results.\n */\n\n\nvar ProductSpecificSearchResultsDropdown =\n/*#__PURE__*/\nfunction (_Component4) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ProductSpecificSearchResultsDropdown, _Component4);\n\n  function ProductSpecificSearchResultsDropdown() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ProductSpecificSearchResultsDropdown);\n\n    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(ProductSpecificSearchResultsDropdown).apply(this, arguments));\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ProductSpecificSearchResultsDropdown, [{\n    key: \"componentDidMount\",\n\n    /**\n     * Set the state of the dropdown to open.\n     */\n    value: function componentDidMount() {\n      this.props.isDropdownOpenCallback(true);\n    }\n    /**\n     * Set the state of the dropdown to closed.\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.isDropdownOpenCallback(false);\n    }\n    /**\n     * Render dropdown.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          products = _this$props.products,\n          addOrRemoveProductCallback = _this$props.addOrRemoveProductCallback,\n          selectedProducts = _this$props.selectedProducts;\n      var productElements = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = products[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var product = _step2.value;\n          productElements.push(Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(ProductSpecificSearchResultsDropdownElement, {\n            product: product,\n            addOrRemoveProductCallback: addOrRemoveProductCallback,\n            selected: selectedProducts.includes(product.id),\n            key: product.id\n          }));\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        role: \"menu\",\n        className: \"wc-products-list-card__search-results\",\n        \"aria-orientation\": \"vertical\",\n        \"aria-label\": __('Products list')\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", null, productElements));\n    }\n  }]);\n\n  return ProductSpecificSearchResultsDropdown;\n}(Component);\n/**\n * One search result.\n */\n\n\nvar ProductSpecificSearchResultsDropdownElement =\n/*#__PURE__*/\nfunction (_Component5) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ProductSpecificSearchResultsDropdownElement, _Component5);\n\n  /**\n   * Constructor.\n   */\n  function ProductSpecificSearchResultsDropdownElement(props) {\n    var _this4;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ProductSpecificSearchResultsDropdownElement);\n\n    _this4 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(ProductSpecificSearchResultsDropdownElement).call(this, props));\n    _this4.handleClick = _this4.handleClick.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this4)));\n    return _this4;\n  }\n  /**\n   * Add product to main list and change UI to show it was added.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ProductSpecificSearchResultsDropdownElement, [{\n    key: \"handleClick\",\n    value: function handleClick() {\n      this.props.addOrRemoveProductCallback(this.props.product.id);\n    }\n    /**\n     * Render one result in the search results.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var product = this.props.product;\n      var icon = this.props.selected ? Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(Dashicon, {\n        icon: \"yes\"\n      }) : null;\n      var productImage = product.images.length !== 0 ? Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"img\", {\n        src: product.images[0].src,\n        alt: product.name\n      }) : null;\n      /* eslint-disable jsx-a11y/click-events-have-key-events */\n\n      /* eslint-disable jsx-a11y/no-static-element-interactions */\n\n      /* reason: This interface will be deprecated, the new component is accessible. */\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        className: 'wc-products-list-card__content' + (this.props.selected ? ' wc-products-list-card__content--added' : ''),\n        onClick: this.handleClick\n      }, productImage, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"span\", {\n        className: \"wc-products-list-card__content-item-name\"\n      }, product.name), icon);\n      /* eslint-enable */\n    }\n  }]);\n\n  return ProductSpecificSearchResultsDropdownElement;\n}(Component);\n/**\n * List preview of selected products.\n */\n\n\nvar ProductSpecificSelectedProducts =\n/*#__PURE__*/\nfunction (_Component6) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ProductSpecificSelectedProducts, _Component6);\n\n  /**\n   * Constructor\n   */\n  function ProductSpecificSelectedProducts(props) {\n    var _this5;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, ProductSpecificSelectedProducts);\n\n    _this5 = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(ProductSpecificSelectedProducts).call(this, props));\n    _this5.state = {\n      query: '',\n      loaded: false\n    };\n    _this5.updateProductCache = _this5.updateProductCache.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this5)));\n    _this5.getQuery = _this5.getQuery.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0___default()(_this5)));\n    return _this5;\n  }\n  /**\n   * Get the preview when component is first loaded.\n   */\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ProductSpecificSelectedProducts, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.updateProductCache();\n    }\n    /**\n     * Update the preview when component is updated.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.state.loaded && this.getQuery() !== this.state.query) {\n        this.updateProductCache();\n      }\n    }\n    /**\n     * Get the endpoint for the current state of the component.\n     */\n\n  }, {\n    key: \"getQuery\",\n    value: function getQuery() {\n      if (!this.props.productIds.length) {\n        return '';\n      } // Determine which products are not already in the cache and only fetch uncached products.\n\n\n      var uncachedProducts = [];\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.props.productIds[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var productId = _step3.value;\n\n          if (!PRODUCT_DATA.hasOwnProperty(productId)) {\n            uncachedProducts.push(productId);\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      return uncachedProducts.length ? '/wc-pb/v3/products?include=' + uncachedProducts.join(',') : '';\n    }\n    /**\n     * Add newly fetched products to the cache.\n     */\n\n  }, {\n    key: \"updateProductCache\",\n    value: function updateProductCache() {\n      var self = this;\n      var query = this.getQuery();\n      self.setState({\n        query: query,\n        loaded: false\n      }); // Add new products to cache.\n\n      if (query.length) {\n        apiFetch({\n          path: query\n        }).then(function (products) {\n          if (products.length) {\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n              for (var _iterator4 = products[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                var product = _step4.value;\n                PRODUCT_DATA[product.id] = product;\n              }\n            } catch (err) {\n              _didIteratorError4 = true;\n              _iteratorError4 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n                  _iterator4.return();\n                }\n              } finally {\n                if (_didIteratorError4) {\n                  throw _iteratorError4;\n                }\n              }\n            }\n          }\n\n          self.setState({\n            loaded: true\n          });\n        });\n      }\n    }\n    /**\n     * Render.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var self = this;\n      var productElements = [];\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var productId = _step5.value;\n\n          // Skip products that aren't in the cache yet or failed to fetch.\n          if (!PRODUCT_DATA.hasOwnProperty(productId)) {\n            return \"continue\";\n          }\n\n          var productData = PRODUCT_DATA[productId];\n          var productImage = productData.images.length !== 0 ? Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"img\", {\n            src: productData.images[0].src,\n            alt: productData.name\n          }) : null;\n          productElements.push(Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"li\", {\n            className: \"wc-products-list-card__item\",\n            key: productData.id + '-specific-select-edit'\n          }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n            className: \"wc-products-list-card__content\"\n          }, productImage, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"span\", {\n            className: \"wc-products-list-card__content-item-name\"\n          }, productData.name), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"button\", {\n            type: \"button\",\n            id: 'product-' + productData.id,\n            onClick: function onClick() {\n              self.props.addOrRemoveProduct(productData.id);\n            }\n          }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(Dashicon, {\n            icon: \"no-alt\"\n          })))));\n        };\n\n        for (var _iterator5 = this.props.productIds[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var _ret = _loop();\n\n          if (_ret === \"continue\") continue;\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n\n      return Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        className: 'wc-products-list-card__results-wrapper wc-products-list-card__results-wrapper--cols-' + this.props.columns\n      }, Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"div\", {\n        role: \"menu\",\n        className: \"wc-products-list-card__results\",\n        \"aria-orientation\": \"vertical\",\n        \"aria-label\": __('Selected products')\n      }, productElements.length > 0 && Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"h3\", null, __('Selected products')), Object(_wordpress_element__WEBPACK_IMPORTED_MODULE_6__[\"createElement\"])(\"ul\", null, productElements)));\n    }\n  }]);\n\n  return ProductSpecificSelectedProducts;\n}(Component);\n\n//# sourceURL=webpack:///./assets/js/legacy/views/specific-select.jsx?");

/***/ }),

/***/ "./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/src/index.js!./node_modules/sass-loader/lib/loader.js?!./assets/js/legacy/products-block.scss":
/*!*****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ref--5-2!./node_modules/postcss-loader/src!./node_modules/sass-loader/lib/loader.js??ref--5-4!./assets/js/legacy/products-block.scss ***!
  \*****************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./assets/js/legacy/products-block.scss?./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/dist/cjs.js??ref--5-2!./node_modules/postcss-loader/src!./node_modules/sass-loader/lib/loader.js??ref--5-4");

/***/ }),

/***/ "@wordpress/element":
/*!******************************************!*\
  !*** external {"this":["wp","element"]} ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("(function() { module.exports = this[\"wp\"][\"element\"]; }());\n\n//# sourceURL=webpack:///external_%7B%22this%22:%5B%22wp%22,%22element%22%5D%7D?");

/***/ })

/******/ })));