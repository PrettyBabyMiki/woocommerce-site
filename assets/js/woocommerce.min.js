jQuery(document).ready(function(e){if(woocommerce_params.option_ajax_add_to_cart=="yes"){e(".add_to_cart_button").live("click",function(){var n=e(this);if(n.is(".product_type_simple, .product_type_downloadable, .product_type_virtual")){if(!e(n).attr("data-product_id")){return true}e(n).addClass("loading");var o={action:"woocommerce_add_to_cart",product_id:e(n).attr("data-product_id"),security:woocommerce_params.add_to_cart_nonce};e("body").trigger("adding_to_cart");e.post(woocommerce_params.ajax_url,o,function(p){e(n).removeClass("loading");o=e.parseJSON(p);if(o.error){alert(o.error);return}fragments=o;if(fragments){e.each(fragments,function(q,r){e(q).addClass("updating")})}e(".widget_shopping_cart, .shop_table.cart, .updating, .cart_totals").fadeTo("400","0.6").block({message:null,overlayCSS:{background:"transparent url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});e(n).addClass("added");if(e(".widget_shopping_cart").size()>0){e(".widget_shopping_cart:eq(0)").load(window.location+" .widget_shopping_cart:eq(0) > *",function(){if(fragments){e.each(fragments,function(q,r){e(q).replaceWith(r)})}e(".widget_shopping_cart, .updating").css("opacity","1").unblock()})}else{if(fragments){e.each(fragments,function(q,r){e(q).replaceWith(r)})}e(".widget_shopping_cart, .updating").css("opacity","1").unblock()}e(".shop_table.cart").load(window.location+" .shop_table.cart:eq(0) > *",function(){e("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" id="add1" class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />');e(".shop_table.cart").css("opacity","1").unblock()});e(".cart_totals").load(window.location+" .cart_totals:eq(0) > *",function(){e(".cart_totals").css("opacity","1").unblock()});e("body").trigger("added_to_cart")});return false}else{return true}})}e("select.orderby").change(function(){e(this).closest("form").submit()});e("#rating").hide().before('<p class="stars"><span><a class="star-1" href="#">1</a><a class="star-2" href="#">2</a><a class="star-3" href="#">3</a><a class="star-4" href="#">4</a><a class="star-5" href="#">5</a></span></p>');e("p.stars a").click(function(){var n=e(this);e("#rating").val(n.text());e("p.stars a").removeClass("active");n.addClass("active");return false});e("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" id="add1" class="plus" />').prepend('<input type="button" value="-" id="minus1" class="minus" />');e(".plus").live("click",function(){var n=parseInt(e(this).prev(".qty").val());if(!n||n==""||n=="NaN"){n=0}e(this).prev(".qty").val(n+1)});e(".minus").live("click",function(){var n=parseInt(e(this).next(".qty").val());if(!n||n==""||n=="NaN"){n=1}if(n>0){e(this).next(".qty").val(n-1)}});var b=woocommerce_params.countries.replace(/&quot;/g,'"');var k=e.parseJSON(b);e("select.country_to_state").change(function(){var r=e(this).val();var o=e(this).closest("div").find("#billing_state, #shipping_state");var q=o.parent();var s=o.attr("name");var n=o.attr("id");var p=o.val();if(k[r]){if(k[r].length==0){q.fadeOut(200,function(){o.parent().find(".chzn-container").remove();o.replaceWith('<input type="hidden" class="hidden" name="'+s+'" id="'+n+'" value="" />');e("body").trigger("country_to_state_changed",[r,e(this).closest("div")])})}else{q.fadeOut(200,function(){var u="";var v=k[r];for(var t in v){u=u+'<option value="'+t+'">'+v[t]+"</option>"}if(o.is("input")){o.replaceWith('<select name="'+s+'" id="'+n+'" class="state_select"></select>');o=e(this).closest("div").find("#billing_state, #shipping_state")}o.html('<option value="">'+woocommerce_params.select_state_text+"</option>"+u);o.val(p);e("body").trigger("country_to_state_changed",[r,e(this).closest("div")]);q.fadeIn(500)})}}else{if(o.is("select")){q.fadeOut(200,function(){q.find(".chzn-container").remove();o.replaceWith('<input type="text" class="input-text" name="'+s+'" id="'+n+'" />');e("body").trigger("country_to_state_changed",[r,e(this).closest("div")]);q.fadeIn(500)})}else{if(o.is(".hidden")){q.find(".chzn-container").remove();o.replaceWith('<input type="text" class="input-text" name="'+s+'" id="'+n+'" />');e("body").trigger("country_to_state_changed",[r,e(this).closest("div")]);q.delay(200).fadeIn(500)}}}e("body").delay(200).trigger("country_to_state_changing",[r,e(this).closest("div")])}).change();e("div.woocommerce_tabs .panel").hide();e("div.woocommerce_tabs ul.tabs li a").click(function(){var o=e(this);var n=o.closest("div.woocommerce_tabs");e("ul.tabs li",n).removeClass("active");e("div.panel",n).hide();e("div"+o.attr("href")).show();o.parent().addClass("active");return false});e("div.woocommerce_tabs").each(function(){var n=window.location.hash;if(n.toLowerCase().indexOf("comment-")>=0){e("ul.tabs li.reviews_tab a",e(this)).click()}else{e("ul.tabs li:first a",e(this)).click()}});e(".shipping-calculator-form").hide();e(".shipping-calculator-button").click(function(){e(".shipping-calculator-form").slideToggle("slow");return false});function a(r,q){var n=true;for(name in r){var p=r[name];var o=q[name];if(p.length!=0&&o.length!=0&&p!=o){n=false}}return n}function m(p){var r=[];for(var o=0;o<product_variations.length;o++){var n=product_variations[o];var q=n.variation_id;if(a(n.attributes,p)){r.push(n)}}return r}function g(n){e(".variations select").each(function(r,s){current_attr_select=e(s);current_attr_select.find("option:gt(0)").attr("disabled","disabled");var q=current_attr_select.attr("name");for(num in n){var o=n[num].attributes;for(attr_name in o){var p=o[attr_name];if(attr_name==q){if(p){p=e("<div/>").html(p).text();p=p.replace(/'/g,"\\'");p=p.replace(/"/g,'\\"');current_attr_select.find('option[value="'+p+'"]').removeAttr("disabled")}else{current_attr_select.find("option").removeAttr("disabled")}}}}})}function f(p){var n=e("div.images img:eq(0)");var t=e("div.images a.zoom:eq(0)");var s=e(n).attr("original-src");var r=e(t).attr("original-href");var q=p.image_src;var o=p.image_link;e(".variations_button").show();e(".single_variation").html(p.price_html+p.availability_html);if(!s){e(n).attr("original-src",e(n).attr("src"))}if(!r){e(t).attr("original-href",e(t).attr("href"))}if(q&&q.length>1){e(n).attr("src",q);e(t).attr("href",o)}else{e(n).attr("src",s);e(t).attr("href",r)}e(".single_variation_wrap").slideDown("200").trigger("variationWrapShown")}function c(o){var n=true;var q={};e(".variations select").each(function(){if(o&&e(this).attr("name")==o){n=false;q[e(this).attr("name")]=""}else{if(e(this).val().length==0){n=false}value=e(this).val().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;");q[e(this).attr("name")]=value}});var r=m(q);if(n){var p=r.pop();if(p){e("form input[name=variation_id]").val(p.variation_id);f(p)}else{e(".variations select").val("")}}else{g(r)}}e(".variations select").change(function(){e("form input[name=variation_id]").val("");e(".single_variation_wrap").hide();e(".single_variation").text("");c();e(this).blur();if(e().uniform&&e.isFunction(e.uniform.update)){e.uniform.update()}}).focus(function(){c(e(this).attr("name"))}).change();if(woocommerce_params.is_cart==1){e("select#shipping_method").live("change",function(){var o=e("#shipping_method").val();e("div.cart_totals").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});var n={action:"woocommerce_update_shipping_method",security:woocommerce_params.update_shipping_method_nonce,shipping_method:o};e.post(woocommerce_params.ajax_url,n,function(p){e("div.cart_totals").replaceWith(p)})})}if(woocommerce_params.is_checkout==1||woocommerce_params.is_pay_page==1){var l;var j;function d(){if(j){j.abort()}var u=e("#shipping_method").val();var t=e("#billing_country").val();var r=e("#billing_state").val();var n=e("input#billing_postcode").val();if(e("#shiptobilling input").is(":checked")||e("#shiptobilling input").size()==0){var o=e("#billing_country").val();var q=e("#billing_state").val();var s=e("input#billing_postcode").val()}else{var o=e("#shipping_country").val();var q=e("#shipping_state").val();var s=e("input#shipping_postcode").val()}e("#order_methods, #order_review").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});var p={action:"woocommerce_update_order_review",security:woocommerce_params.update_order_review_nonce,shipping_method:u,country:t,state:r,postcode:n,s_country:o,s_state:q,s_postcode:s,post_data:e("form.checkout").serialize()};j=e.ajax({type:"POST",url:woocommerce_params.ajax_url,data:p,success:function(v){e("#order_methods, #order_review").remove();e("#order_review_heading").after(v);e("#order_review input[name=payment_method]:checked").click()}})}e("p.password, form.login, div.shipping_address").hide();e("input.show_password").change(function(){e("p.password").slideToggle()});e("a.showlogin").click(function(){e("form.login").slideToggle();return false});e("#shiptobilling input").change(function(){e("div.shipping_address").hide();if(!e(this).is(":checked")){e("div.shipping_address").slideDown()}}).change();if(woocommerce_params.option_guest_checkout=="yes"){e("div.create-account").hide();e("input#createaccount").change(function(){e("div.create-account").hide();if(e(this).is(":checked")){e("div.create-account").slideDown()}}).change()}e(".payment_methods input.input-radio").live("click",function(){e("div.payment_box").hide();if(e(this).is(":checked")){e("div.payment_box."+e(this).attr("ID")).slideDown()}});e("#order_review input[name=payment_method]:checked").click();e("#shipping_method").live("change",function(){clearTimeout(l);d()});e("input#billing_country, input#billing_state, #billing_postcode, input#shipping_country, input#shipping_state, #shipping_postcode").live("keydown",function(){clearTimeout(l);l=setTimeout("update_checkout()","1000")});e("select#billing_country, select#billing_state, select#shipping_country, select#shipping_state, #shiptobilling input, .update_totals_on_change").live("change",function(){clearTimeout(l);d()});if(woocommerce_params.is_checkout==1){d()}e("form.checkout").submit(function(){var n=e(this);if(n.is(".processing")){return false}n.addClass("processing").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});e.ajax({type:"POST",url:woocommerce_params.checkout_url,data:n.serialize(),success:function(p){e(".woocommerce_error, .woocommerce_message").remove();try{success=e.parseJSON(p);window.location=decodeURI(success.redirect)}catch(o){n.prepend(p);n.removeClass("processing").unblock();e("html, body").animate({scrollTop:(e("form.checkout").offset().top-100)},1000)}},dataType:"html"});return false});var i=woocommerce_params.locale.replace(/&quot;/g,'"');var h=e.parseJSON(i);e("body").bind("country_to_state_changing",function(q,t,u){var r=u;if(h[t]){var p=h[t]}else{var p=h["default"]}if(p.state){var s=r.find("#billing_state_field, #shipping_state_field");if(p.state["label"]){s.find("label").text(p.state["label"])}}var o=r.find("#billing_postcode_field, #shipping_postcode_field");var n=r.find("#billing_city_field, #shipping_city_field");if(p.city){if(p.city["label"]){n.find("label").text(p.city["label"])}}if(p.postcode){if(p.postcode["label"]){o.find("label").text(p.postcode["label"])}}if(p.postcode_before_city){if(n.is(".form-row-first")){n.fadeOut(200,function(){n.removeClass("form-row-first").addClass("form-row-last").insertAfter(o).fadeIn(500)});o.fadeOut(200,function(){o.removeClass("form-row-last").addClass("form-row-first").fadeIn(500)})}}else{if(n.is(".form-row-last")){n.fadeOut(200,function(){n.removeClass("form-row-last").addClass("form-row-first").insertBefore(o).fadeIn(500)});o.fadeOut(200,function(){o.removeClass("form-row-first").addClass("form-row-last").fadeIn(500)})}}})}});