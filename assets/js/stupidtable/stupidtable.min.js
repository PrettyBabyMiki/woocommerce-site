!function(t){t.fn.stupidtable=function(n){return this.each(function(){var r=t(this);n=n||{},n=t.extend({},t.fn.stupidtable.default_sort_fns,n),r.on("click.stupidtable","thead th",function(){var e=t(this),a=0,i=t.fn.stupidtable.dir;e.parents("tr").find("th").slice(0,e.index()+1).each(function(){var n=t(this).attr("colspan")||1;a+=parseInt(n,10)}),a-=1;var s=e.data("sort-default")||i.ASC;e.data("sort-dir")&&(s=e.data("sort-dir")===i.ASC?i.DESC:i.ASC);var o=e.data("sort")||null;null!==o&&(r.trigger("beforetablesort",{column:e.index(),direction:s}),r.css("display"),setTimeout(function(){var d=n[o];r.children("tbody").each(function(n,r){var e=[],o=t(r),u=o.children("tr").not("[data-sort-ignore]");u.each(function(n,r){var i=t(r).children().eq(a),s=i.data("sort-value"),o="undefined"!=typeof s?s:i.text();e.push([o,r])}),e.sort(function(t,n){return d(t[0],n[0])}),s!=i.ASC&&e.reverse(),u=t.map(e,function(t){return t[1]}),o.append(u)}),r.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc"),e.data("sort-dir",s).addClass("sorting-"+s),r.trigger("aftertablesort",{column:e.index(),direction:s}),r.css("display")},10))})})},t.fn.stupidtable.dir={ASC:"asc",DESC:"desc"},t.fn.stupidtable.default_sort_fns={"int":function(t,n){return parseInt(t,10)-parseInt(n,10)},"float":function(t,n){return parseFloat(t)-parseFloat(n)},string:function(t,n){return t.localeCompare(n)},"string-ins":function(t,n){return t=t.toLocaleLowerCase(),n=n.toLocaleLowerCase(),t.localeCompare(n)}}}(jQuery);
