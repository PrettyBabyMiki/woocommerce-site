/*!
 * Variations Plugin
 */
!function(a,b,c,d){a.fn.wc_variation_form=function(){a.fn.wc_variation_form.find_matching_variations=function(b,c){for(var d=[],e=0;e<b.length;e++){var f=b[e];a.fn.wc_variation_form.variations_match(f.attributes,c)&&d.push(f)}return d},a.fn.wc_variation_form.variations_match=function(a,b){var c=!0;for(var e in a)if(a.hasOwnProperty(e)){var f=a[e],g=b[e];f!==d&&g!==d&&0!==f.length&&0!==g.length&&f!==g&&(c=!1)}return c},a.fn.wc_variation_form.get_variation_description_html=function(a,b){var c,d=a.data("product_variations");return b>0&&(b--,d[b].hasOwnProperty("variation_description"))?c='<div class="woocommerce-variation-description woocommerce-variation-description-'+d[b].variation_id+'">'+d[b].variation_description+"</div>":""},this.unbind("check_variations update_variation_values found_variation"),this.find(".reset_variations").unbind("click"),this.find(".variations select").unbind("change focusin");var c=this.on("click",".reset_variations",function(){a(this).closest(".variations_form").find(".variations select").val("").change();var b=a(this).closest(".product").find(".sku"),c=a(this).closest(".product").find(".product_weight"),d=a(this).closest(".product").find(".product_dimensions");return b.attr("data-o_sku")&&b.text(b.attr("data-o_sku")),c.attr("data-o_weight")&&c.text(c.attr("data-o_weight")),d.attr("data-o_dimensions")&&d.text(d.attr("data-o_dimensions")),!1}).on("change",".variations select",function(){var b=a(this).closest(".variations_form"),c=a.fn.wc_variation_form.get_variation_description_html(b,this.selectedIndex);b.find(".variations").next(".woocommerce-variation-description").remove(),c&&b.find(".variations").after(c),b.find("input.variation_id").length>0?b.find("input.variation_id").val("").change():b.find("input[name=variation_id]").val("").change(),b.trigger("woocommerce_variation_select_change").trigger("check_variations",["",!1]),a(this).blur(),a().uniform&&a.isFunction(a.uniform.update)&&a.uniform.update(),b.trigger("woocommerce_variation_has_changed")}).on("focusin touchstart",".variations select",function(){var b,c=a(this).closest(".variations_form");b="undefined"!=typeof a(this).data("attribute_name")?a(this).data("attribute_name"):a(this).attr("name"),c.trigger("woocommerce_variation_select_focusin").trigger("check_variations",[b,!0])}).on("check_variations",function(c,d,e){var f,g,h=!0,i=!1,j={},k=a(this),l=k.find(".reset_variations");k.find(".variations select").each(function(){f="undefined"!=typeof a(this).data("attribute_name")?a(this).data("attribute_name"):a(this).attr("name"),0===a(this).val().length?h=!1:i=!0,d&&f===d?(h=!1,j[f]=""):j[f]=a(this).val()});var m=parseInt(k.data("product_id"),10),n=k.data("product_variations");n||(n=b.product_variations.product_id),n||(n=b.product_variations),n||(n=b["product_variations_"+m]);var o=a.fn.wc_variation_form.find_matching_variations(n,j);if(h){var p=o.shift();p?(g=k.find(k.find("input.variation_id").length>0?"input.variation_id":"input[name=variation_id]"),g.val(p.variation_id).change(),k.trigger("found_variation",[p])):(k.find(".variations select").val(""),e||k.trigger("reset_image"),b.alert(wc_add_to_cart_variation_params.i18n_no_matching_variations_text))}else k.trigger("update_variation_values",[o]),e||k.trigger("reset_image"),d||k.find(".single_variation_wrap").slideUp(200).trigger("hide_variation");if(i)"hidden"===l.css("visibility")&&l.css("visibility","visible").hide().fadeIn();else{l.css("visibility","hidden");var q=a(this).closest(".product").find(".sku");q.text(q.attr("data-o_sku"))}}).on("reset_image",function(){var b=a(this).closest(".product"),c=b.find("div.images img:eq(0)"),e=b.find("div.images a.zoom:eq(0)"),f=c.attr("data-o_src"),g=c.attr("data-o_title"),h=c.attr("data-o_title"),i=e.attr("data-o_href");f!==d&&c.attr("src",f),i!==d&&e.attr("href",i),g!==d&&(c.attr("title",g),e.attr("title",g)),h!==d&&c.attr("alt",h)}).on("update_variation_values",function(b,c){var d=a(this).closest(".variations_form");d.find(".variations select").each(function(b,d){var e,f,g=a(d);g.data("attribute_options")||g.data("attribute_options",g.find("option:gt(0)").get()),g.find("option:gt(0)").remove(),g.append(g.data("attribute_options")),g.find("option:gt(0)").removeClass("attached"),g.find("option:gt(0)").removeClass("enabled"),g.find("option:gt(0)").removeAttr("disabled"),e="undefined"!=typeof g.data("attribute_name")?g.data("attribute_name"):g.attr("name");for(var h in c)if("undefined"!=typeof c[h]){var i=c[h].attributes;for(var j in i)if(i.hasOwnProperty(j)){var k=i[j];j===e&&(f=c[h].variation_is_active?"enabled":"",k?(k=a("<div/>").html(k).text(),k=k.replace(/'/g,"\\'"),k=k.replace(/"/g,'\\"'),g.find('option[value="'+k+'"]').addClass("attached "+f)):g.find("option:gt(0)").addClass("attached "+f))}}g.find("option:gt(0):not(.attached)").remove(),g.find("option:gt(0):not(.enabled)").attr("disabled","disabled")}),d.trigger("woocommerce_update_variation_values")}).on("found_variation",function(b,c){var e=a(this),f=a(this).closest(".product"),g=f.find("div.images img:eq(0)"),h=f.find("div.images a.zoom:eq(0)"),i=g.attr("data-o_src"),j=g.attr("data-o_title"),k=g.attr("data-o_alt"),l=h.attr("data-o_href"),m=c.image_src,n=c.image_link,o=c.image_caption,p=c.image_title;e.find(".variations_button").show(),e.find(".single_variation").html(c.price_html+c.availability_html),i===d&&(i=g.attr("src")?g.attr("src"):"",g.attr("data-o_src",i)),l===d&&(l=h.attr("href")?h.attr("href"):"",h.attr("data-o_href",l)),j===d&&(j=g.attr("title")?g.attr("title"):"",g.attr("data-o_title",j)),k===d&&(k=g.attr("alt")?g.attr("alt"):"",g.attr("data-o_alt",k)),m&&m.length>1?(g.attr("src",m).attr("alt",p).attr("title",p),h.attr("href",n).attr("title",o)):(g.attr("src",i).attr("alt",k).attr("title",j),h.attr("href",l).attr("title",j));var q=e.find(".single_variation_wrap"),r=f.find(".product_meta").find(".sku"),s=f.find(".product_weight"),t=f.find(".product_dimensions");r.attr("data-o_sku")||r.attr("data-o_sku",r.text()),s.attr("data-o_weight")||s.attr("data-o_weight",s.text()),t.attr("data-o_dimensions")||t.attr("data-o_dimensions",t.text()),r.text(c.sku?c.sku:r.attr("data-o_sku")),s.text(c.weight?c.weight:s.attr("data-o_weight")),t.text(c.dimensions?c.dimensions:t.attr("data-o_dimensions")),q.find(".quantity").show(),c.is_purchasable&&c.is_in_stock&&c.variation_is_visible||e.find(".variations_button").hide(),c.variation_is_visible||e.find(".single_variation").html("<p>"+wc_add_to_cart_variation_params.i18n_unavailable_text+"</p>"),""!==c.min_qty?q.find(".quantity input.qty").attr("min",c.min_qty).val(c.min_qty):q.find(".quantity input.qty").removeAttr("min"),""!==c.max_qty?q.find(".quantity input.qty").attr("max",c.max_qty):q.find(".quantity input.qty").removeAttr("max"),"yes"===c.is_sold_individually&&(q.find(".quantity input.qty").val("1"),q.find(".quantity").hide()),q.slideDown(200).trigger("show_variation",[c])});return c.trigger("wc_variation_form"),c},a(function(){return"undefined"==typeof wc_add_to_cart_variation_params?!1:(a(".variations_form").wc_variation_form(),void a(".variations_form .variations select").change())})}(jQuery,window,document);