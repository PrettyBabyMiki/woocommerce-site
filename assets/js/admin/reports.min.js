jQuery(function(e){function t(e,t,n){jQuery('<div class="chart-tooltip">'+n+"</div>").css({top:t-16,left:e+20}).appendTo("body").fadeIn(200)}var n=null,r=null;jQuery(".chart-placeholder").bind("plothover",function(e,i,s){if(s){if(n!=s.dataIndex||r!=s.seriesIndex){n=s.dataIndex;r=s.seriesIndex;jQuery(".chart-tooltip").remove();if(s.series.points.show||s.series.enable_tooltip){var o=s.series.data[s.dataIndex][1];tooltip_content="";s.series.prepend_label&&(tooltip_content=tooltip_content+s.series.label+": ");s.series.prepend_tooltip&&(tooltip_content+=s.series.prepend_tooltip);tooltip_content+=o;s.series.append_tooltip&&(tooltip_content+=s.series.append_tooltip);s.series.pie.show?t(i.pageX,i.pageY,tooltip_content):t(s.pageX,s.pageY,tooltip_content)}}}else{jQuery(".chart-tooltip").remove();n=null}});e(".wc_sparkline.bars").each(function(){var t=e(this).data("sparkline"),n={grid:{show:!1}},r=[{data:t,color:e(this).data("color"),bars:{fillColor:e(this).data("color"),fill:!0,show:!0,lineWidth:1,barWidth:e(this).data("barwidth"),align:"center"},shadowSize:0}],i=e.plot(e(this),r,n)});e(".wc_sparkline.lines").each(function(){var t=e(this).data("sparkline"),n={grid:{show:!1}},r=[{data:t,color:e(this).data("color"),lines:{fill:!1,show:!0,lineWidth:1,align:"center"},shadowSize:0}],i=e.plot(e(this),r,n)});var i=jQuery(".range_datepicker").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,maxDate:"+0D",showButtonPanel:!0,showOn:"focus",buttonImageOnly:!0,onSelect:function(e){var t=jQuery(this).is(".from")?"minDate":"maxDate",n=jQuery(this).data("datepicker"),r=jQuery.datepicker.parseDate(n.settings.dateFormat||jQuery.datepicker._defaults.dateFormat,e,n.settings);i.not(this).datepicker("option",t,r)}});e(".export_csv").click(function(){var t=e(this).data("exclude_series")||"";t=t.toString();t=t.split(",");var n=e(this).data("xaxes"),r=e(this).data("groupby"),i=e(this).data("export"),s="data:application/csv;charset=utf-8,";if(i=="table"){e(this).closest("div").find("thead tr,tbody tr").each(function(){e(this).find("th,td").each(function(){value=e(this).text();value=value.replace("[?]","");s+='"'+value+'"'+","});s=s.substring(0,s.length-1);s+="\n"});e(this).closest("div").find("tfoot tr").each(function(){e(this).find("th,td").each(function(){value=e(this).text();value=value.replace("[?]","");s+='"'+value+'"'+",";if(e(this).attr("colspan")>0)for(h=1;h<e(this).attr("colspan");h++)s+='"",'});s=s.substring(0,s.length-1);s+="\n"})}else{if(!window.main_chart)return!1;var o=window.main_chart.getData(),u=[];s+=n+",";e.each(o,function(n,r){(!t||e.inArray(n.toString(),t)==-1)&&u.push(r)});for(var a=0;a<u.length;++a)s+=u[a].label+",";s=s.substring(0,s.length-1);s+="\n";var f={};for(var a=0;a<u.length;++a){var l=u[a].data;for(var c=0;c<l.length;++c){f[l[c][0]]=new Array;for(var h=0;h<u.length;++h)f[l[c][0]].push(0)}}for(var a=0;a<u.length;++a){var l=u[a].data;for(var c=0;c<l.length;++c)f[l[c][0]][a]=l[c][1]}e.each(f,function(e,t){var n=new Date(parseInt(e));r=="day"?s+=n.getFullYear()+"-"+parseInt(n.getMonth()+1)+"-"+n.getDate()+",":s+=n.getFullYear()+"-"+parseInt(n.getMonth()+1)+",";for(var i=0;i<t.length;++i){val=t[i];Math.round(val)!=val&&(val=val.toFixed(2));s+=val+","}s=s.substring(0,s.length-1);s+="\n"})}e(this).attr("href",encodeURI(s));return!0})});
