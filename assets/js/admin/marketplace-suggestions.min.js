!function(h,p,a){h(function(){function c(n){var t=document.createElement("a");return t.classList.add("suggestion-dismiss"),t.setAttribute("title",p.i18n_marketplace_suggestions_dismiss_tooltip),t.setAttribute("href","#"),t.onclick=function(t){t.preventDefault(),function e(t){h("[data-suggestion-slug="+t+"]").fadeOut(function(){h(this).remove(),s()}),jQuery.post(a,{action:"woocommerce_add_dismissed_marketplace_suggestion",_wpnonce:p.dismiss_suggestion_nonce,slug:t}),window.wcTracks.recordEvent("marketplace_suggestion_dismissed",{suggestionSlug:t})}(n)},t}function d(t,e,n,s,a){var i=document.createElement("a"),r=function c(e,t){var n={utm_source:"unknown",utm_campaign:"marketplacesuggestions",utm_medium:"product"},s=_.findKey({productstable:["products-list-inline"],productsempty:["products-list-empty-header","products-list-empty-footer","products-list-empty-body"],ordersempty:["orders-list-empty-header","orders-list-empty-footer","orders-list-empty-body"],editproduct:["product-edit-meta-tab-header","product-edit-meta-tab-footer","product-edit-meta-tab-body"]},function(t){return _.contains(t,e)});return s&&(n.utm_source=s),t+"?"+jQuery.param(n)}(t,n);if(i.setAttribute("href",r),i.setAttribute("target","blank"),i.textContent=s,i.onclick=function(){window.wcTracks.recordEvent("marketplace_suggestion_clicked",{suggestionSlug:e})},a)i.classList.add("button");else{i.classList.add("linkout");var o=document.createElement("span");o.classList.add("dashicons","dashicons-external"),i.appendChild(o)}return i}function g(t){if(!t)return null;var e=document.createElement("img");return e.src=t,e.classList.add("marketplace-suggestion-icon"),e}function m(t,e){var n=document.createElement("div");if(n.classList.add("marketplace-suggestion-container-content"),t){var s=document.createElement("h4");s.textContent=t,n.appendChild(s)}if(e){var a=document.createElement("p");a.textContent=e,n.appendChild(a)}return n}function f(t,e,n,s,a,i){var r=document.createElement("div");if(s||(s=p.i18n_marketplace_suggestions_default_cta),r.classList.add("marketplace-suggestion-container-cta"),n&&s){var o=d(t,e,n,s,a);r.appendChild(o)}return i&&r.appendChild(c(e)),r}function u(t,e,n,s,a,i,r,o,c){var d=document.createElement("div");d.classList.add("marketplace-suggestion-container"),d.dataset.suggestionSlug=e;var u=g(n);return u&&d.appendChild(u),d.appendChild(m(s,a)),d.appendChild(f(t,e,i,r,o,c)),d}function l(t,e){var n=_.filter(t,function(t){return _.isArray(t.context)?_.contains(t.context,e):e===t.context});return n=_.filter(n,function(t){return!_.contains(p.dismissed_suggestions,t.slug)}),n=_.filter(n,function(t){return!_.contains(p.active_plugins,t["hide-if-active"])}),n=_.filter(n,function(t){return!t["show-if-active"]||0<_.intersection(p.active_plugins,t["show-if-active"]).length})}function s(){h('.marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-body"]').children().length<=0&&(h('.marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-header"]').slideUp(),h('.marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-body"]').fadeOut())}void 0!==p&&(window.wcTracks=window.wcTracks||{},window.wcTracks.recordEvent=window.wcTracks.recordEvent||function(){},p.suggestions_data&&function t(c){var d=[];h(".marketplace-suggestions-container").each(function(){var t=this.dataset.marketplaceSuggestionsContext,e=l(c,t),n=_.sample(e,5);for(var s in n){var a=n[s]["link-text"],i=!0;n[s]["link-text"]&&(a=n[s]["link-text"],i=!1);var r=!0;!1===n[s]["allow-dismiss"]&&(r=!1);var o=u(t,n[s].slug,n[s].icon,n[s].title,n[s].copy,n[s].url,a,i,r);h(this).append(o),h(this).addClass("showing-suggestion"),d.push(t),window.wcTracks.recordEvent("marketplace_suggestion_displayed",{suggestionSlug:n[s].slug})}}),0===d.length&&h(".wp-admin.admin-bar.edit-php.post-type-product table.wp-list-table.posts tbody").first().each(function(){var t="products-list-inline",e=l(c,t);if(e&&e.length){var n=_.sample(e),s=!0;!1===n["allow-dismiss"]&&(s=!1);var a=function p(t,e,n,s,a,i,r,o){if(s&&i){var c=document.createElement("tr");c.classList.add("marketplace-table-banner"),c.classList.add("marketplace-suggestions-container"),c.classList.add("showing-suggestion"),c.dataset.marketplaceSuggestionsContext="products-list-inline",c.dataset.suggestionSlug=e;var d=document.createElement("td");d.setAttribute("colspan",10);var u=document.createElement("div");u.classList.add("marketplace-suggestion-container"),u.dataset.suggestionSlug=e;var l=g(n);return l&&u.appendChild(l),u.appendChild(m(s,a)),u.appendChild(f(t,e,i,r,!0,o)),d.appendChild(u),c.appendChild(d),c}}(t,n.slug,n.icon,n.title,n.copy,n.url,n["button-text"],s);if(a){var i=h(this).children();h(a).hide(),i.length<=3?h(this).append(a):h(i[2]).after(a),h(a).fadeIn(),d.push(t),window.wcTracks.recordEvent("marketplace_suggestion_displayed",{suggestionSlug:n.slug})}}}),function n(t){var e=0<_.intersection(t,["products-list-empty-body","orders-list-empty-body"]).length;e&&(h("#screen-meta-links").hide(),h("#wpfooter").hide()),e||(h('.marketplace-suggestions-container[data-marketplace-suggestions-context="products-list-empty-header"]').hide(),h('.marketplace-suggestions-container[data-marketplace-suggestions-context="products-list-empty-footer"]').hide(),h('.marketplace-suggestions-container[data-marketplace-suggestions-context="orders-list-empty-header"]').hide(),h('.marketplace-suggestions-container[data-marketplace-suggestions-context="orders-list-empty-footer"]').hide())}(d),s()}(p.suggestions_data))})}(jQuery,marketplace_suggestions,ajaxurl);