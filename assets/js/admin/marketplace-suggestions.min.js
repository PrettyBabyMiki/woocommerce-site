!function(w,b,d){w(function(){function u(e,s,n,a,o){var t=document.createElement("a");return t.classList.add("suggestion-dismiss"),t.setAttribute("title",b.i18n_marketplace_suggestions_dismiss_tooltip),t.setAttribute("href","#"),t.onclick=function(t){t.preventDefault(),function c(t,e,s,n,a){if(w("[data-suggestion-slug="+a+"]").fadeOut(function(){w(this).remove(),m()}),jQuery.post(d,{action:"woocommerce_add_dismissed_marketplace_suggestion",_wpnonce:b.dismiss_suggestion_nonce,slug:a}),_.contains(["products-list-inline"],t)){var o="woocommerce_snooze_suggestions__"+t;Cookies.set(o,"true",{expires:2});var i="woocommerce_dismissed_suggestions__"+t,r=parseInt(Cookies.get(i),10)||0;Cookies.set(i,r+1,{expires:31})}window.wcTracks.recordEvent("marketplace_suggestion_dismissed",{suggestion_slug:a,context:t,product:e,promoted:s,target:n})}(e,s,n,a,o)},t}function l(t,e,s,n,a,o,i){var r=document.createElement("a"),c=function u(e,t){var s={utm_source:"unknown",utm_campaign:"marketplacesuggestions",utm_medium:"product"},n=_.findKey({productstable:["products-list-inline"],productsempty:["products-list-empty-header","products-list-empty-footer","products-list-empty-body"],ordersempty:["orders-list-empty-header","orders-list-empty-footer","orders-list-empty-body"],editproduct:["product-edit-meta-tab-header","product-edit-meta-tab-footer","product-edit-meta-tab-body"]},function(t){return _.contains(t,e)});return n&&(s.utm_source=n),t+"?"+jQuery.param(s)}(t,a);if(r.setAttribute("href",c),r.setAttribute("target","blank"),r.textContent=o,r.onclick=function(){window.wcTracks.recordEvent("marketplace_suggestion_clicked",{suggestion_slug:n,context:t,product:e,promoted:s,target:a})},i)r.classList.add("button");else{r.classList.add("linkout");var d=document.createElement("span");d.classList.add("dashicons","dashicons-external"),r.appendChild(d)}return r}function f(t){if(!t)return null;var e=document.createElement("img");return e.src=t,e.classList.add("marketplace-suggestion-icon"),e}function k(t,e){var s=document.createElement("div");if(s.classList.add("marketplace-suggestion-container-content"),t){var n=document.createElement("h4");n.textContent=t,s.appendChild(n)}if(e){var a=document.createElement("p");a.textContent=e,s.appendChild(a)}return s}function h(t,e,s,n,a,o,i,r){var c=document.createElement("div");if(o||(o=b.i18n_marketplace_suggestions_default_cta),c.classList.add("marketplace-suggestion-container-cta"),a&&o){var d=l(t,e,s,n,a,o,i);c.appendChild(d)}return r&&c.appendChild(u(t,e,s,a,n)),c}function v(){return w("table.wp-list-table.posts thead th:not(.hidden)").length+1}function p(t,e,s,n,a,o,i,r,c,d,u){var l=document.createElement("div");l.classList.add("marketplace-suggestion-container"),l.dataset.suggestionSlug=n;var p=f(a);return p&&l.appendChild(p),l.appendChild(k(o,i)),l.appendChild(h(t,e,s,n,r,c,d,u)),l}function g(t,e){var s=_.filter(t,function(t){return _.isArray(t.context)?_.contains(t.context,e):e===t.context});return s=_.filter(s,function(t){return!_.contains(b.dismissed_suggestions,t.slug)}),s=_.filter(s,function(t){return!_.contains(b.active_plugins,t.product)}),s=_.filter(s,function(t){return!t["show-if-active"]||0<_.intersection(b.active_plugins,t["show-if-active"]).length})}function m(){if(w('.marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-body"]').children().length<=0){', .marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-header"]',', .marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-footer"]',w('.marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-body"], .marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-header"], .marketplace-suggestions-container[data-marketplace-suggestions-context="product-edit-meta-tab-footer"]').fadeOut({complete:function(){w(".marketplace-suggestions-metabox-nosuggestions-placeholder").fadeIn()}})}}void 0!==b&&(window.wcTracks=window.wcTracks||{},window.wcTracks.recordEvent=window.wcTracks.recordEvent||function(){},b.suggestions_data&&function t(c){var d=[];w(".marketplace-suggestions-container").each(function(){var t=this.dataset.marketplaceSuggestionsContext,e=g(c,t),s=_.sample(e,5);for(var n in s){var a=s[n]["link-text"],o=!0;s[n]["link-text"]&&(a=s[n]["link-text"],o=!1);var i=!0;!1===s[n]["allow-dismiss"]&&(i=!1);var r=p(t,s[n].product,s[n].promoted,s[n].slug,s[n].icon,s[n].title,s[n].copy,s[n].url,a,o,i);w(this).append(r),w(this).addClass("showing-suggestion"),d.push(t),window.wcTracks.recordEvent("marketplace_suggestion_displayed",{suggestion_slug:s[n].slug,context:t,product:s[n].product,promoted:s[n].promoted,target:s[n].url})}}),0===d.length&&w(".wp-admin.admin-bar.edit-php.post-type-product table.wp-list-table.posts tbody").first().each(function(){var t="products-list-inline";if(!(Cookies.get("woocommerce_snooze_suggestions__products-list-inline")||5<parseInt(Cookies.get("contextDismissalCountCookie"),10))){var e=g(c,t);if(e&&e.length){var s=_.sample(e),n=!0;!1===s["allow-dismiss"]&&(n=!1);var a=function m(t,e,s,n,a,o,i,r,c,d){if(o&&r){var u=document.createElement("tr");u.classList.add("marketplace-table-banner"),u.classList.add("marketplace-suggestions-container"),u.classList.add("showing-suggestion"),u.dataset.marketplaceSuggestionsContext="products-list-inline",u.dataset.suggestionSlug=n;var l=document.createElement("td");l.classList.add("marketplace-table-banner-td"),l.setAttribute("colspan",v());var p=document.createElement("div");p.classList.add("marketplace-suggestion-container"),p.dataset.suggestionSlug=n;var g=f(a);return g&&p.appendChild(g),p.appendChild(k(o,i)),p.appendChild(h(t,e,s,n,r,c,!0,d)),l.appendChild(p),u.appendChild(l),u}}(t,s.product,s.promoted,s.slug,s.icon,s.title,s.copy,s.url,s["button-text"],n);if(a){var o=w(this).children();w(a).hide(),o.length<=3?w(this).append(a):w(o[2]).after(a),w(a).fadeIn(),d.push(t),function i(){w("#show-settings-link").on("focus.scroll-into-view",function(){w(".marketplace-table-banner-td").attr("colspan",v())})}(),window.wcTracks.recordEvent("marketplace_suggestion_displayed",{suggestion_slug:s.slug,context:t,product:s.product,promoted:s.promoted,target:s.url})}}}}),function s(t){var e=0<_.intersection(t,["products-list-empty-body","orders-list-empty-body"]).length;e&&(w("#screen-meta-links").hide(),w("#wpfooter").hide()),e||(w('.marketplace-suggestions-container[data-marketplace-suggestions-context="products-list-empty-header"]').hide(),w('.marketplace-suggestions-container[data-marketplace-suggestions-context="products-list-empty-footer"]').hide(),w('.marketplace-suggestions-container[data-marketplace-suggestions-context="orders-list-empty-header"]').hide(),w('.marketplace-suggestions-container[data-marketplace-suggestions-context="orders-list-empty-footer"]').hide())}(d),m()}(b.suggestions_data))})}(jQuery,marketplace_suggestions,ajaxurl);