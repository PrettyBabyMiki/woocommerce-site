jQuery(function(){function f(m){var k=[];var n=new Date(m.xaxis.min);n.setUTCDate(n.getUTCDate()-((n.getUTCDay()+1)%7));n.setUTCSeconds(0);n.setUTCMinutes(0);n.setUTCHours(0);var l=n.getTime();do{k.push({xaxis:{from:l,to:l+2*24*60*60*1000}});l+=7*24*60*60*1000}while(l<m.xaxis.max);return k}var a=jQuery.parseJSON(params.order_data.replace(/&quot;/g,'"'));var h=a.order_counts;var e=a.order_amounts;for(var b=0;b<h.length;++b){h[b][0]+=60*60*1000}for(var b=0;b<e.length;++b){e[b][0]+=60*60*1000}var g=jQuery.plot(jQuery("#placeholder"),[{label:"Number of sales",data:h},{label:"Sales amount",data:e,yaxis:2}],{series:{lines:{show:true},points:{show:true}},grid:{show:true,aboveData:false,color:"#ccc",backgroundColor:"#fff",borderWidth:2,borderColor:"#ccc",clickable:false,hoverable:true,markings:f},xaxis:{mode:"time",timeformat:"%d %b",tickLength:1,minTickSize:[1,"day"]},yaxes:[{min:0,tickSize:1,tickDecimals:0},{position:"right",min:0,tickDecimals:2}],colors:["#21759B","#ed8432"]});function j(d,k,i){jQuery('<div id="tooltip">'+i+"</div>").css({position:"absolute",display:"none",top:k+5,left:d+5,border:"1px solid #fdd",padding:"2px","background-color":"#fee",opacity:0.8}).appendTo("body").fadeIn(200)}var c=null;jQuery("#placeholder").bind("plothover",function(i,l,d){if(d){if(c!=d.dataIndex){c=d.dataIndex;jQuery("#tooltip").remove();if(d.series.label=="Number of sales"){var k=d.datapoint[1];j(d.pageX,d.pageY,d.series.label+" - "+k)}else{var k=d.datapoint[1].toFixed(2);j(d.pageX,d.pageY,d.series.label+" - "+params.currency_symbol+k)}}}else{jQuery("#tooltip").remove();c=null}})});