jQuery(function(d){jQuery("#upsell_product_data").bind("keypress",function(g){if(g.keyCode==13){return false}});jQuery("ul.tabs").show();jQuery("div.panel-wrap").each(function(){jQuery("div.panel:not(div.panel:first)",this).hide()});jQuery("ul.tabs a").click(function(){var g=jQuery(this).closest("div.panel-wrap");jQuery("ul.tabs li",g).removeClass("active");jQuery(this).parent().addClass("active");jQuery("div.panel",g).hide();jQuery(jQuery(this).attr("href")).show();return false});jQuery("#order_items_list button.remove_row").live("click",function(){var g=confirm(woocommerce_writepanel_params.remove_item_notice);if(g){jQuery(this).closest("tr.item").hide();jQuery("input",jQuery(this).closest("tr.item")).val("")}return false});jQuery("button.calc_totals").live("click",function(){var p=confirm(woocommerce_writepanel_params.cart_total);if(p){var h=jQuery("#order_items_list tr.item").size();var n=0;var o=jQuery("input#_order_discount").val();var g=jQuery("input#_order_shipping").val();var k=parseFloat(jQuery("input#_order_shipping_tax").val());var l=0;var j=0;var m=0;if(!o){o=0}if(!g){g=0}if(!k){k=0}if(h>0){for(i=0;i<h;i++){itemCost=jQuery("input[name^=item_cost]:eq("+i+")").val();itemQty=parseInt(jQuery("input[name^=item_quantity]:eq("+i+")").val());itemTax=jQuery("input[name^=item_tax_rate]:eq("+i+")").val();if(!itemCost){itemCost=0}if(!itemTax){itemTax=0}if(!itemQty){itemQty=0}totalItemTax=0;totalItemCost=itemCost*itemQty;if(itemTax&&itemTax>0){taxRate=itemTax/100;itemTaxAmount=((itemCost*taxRate)*100);itemTaxAmount=itemTaxAmount.toFixed(2);totalItemTax=Math.round(itemTaxAmount)/100;totalItemTax=totalItemTax*itemQty}j=j+totalItemCost;l=l+totalItemTax}}n=j;m=parseFloat(n)+parseFloat(l)-parseFloat(o)+parseFloat(g)+parseFloat(k);if(m<0){m=0}jQuery("input#_order_subtotal").val(n.toFixed(2));jQuery("input#_order_tax").val(l.toFixed(2));jQuery("input#_order_shipping_tax").val(k.toFixed(2));jQuery("input#_order_total").val(m.toFixed(2))}return false});jQuery("button.add_shop_order_item").click(function(){var j=jQuery("select.add_item_id").val();if(j){jQuery("table.woocommerce_order_items").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_writepanel_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});var g=jQuery("table.woocommerce_order_items tbody tr.item").size();var h={action:"woocommerce_add_order_item",item_to_add:jQuery("select.add_item_id").val(),index:g,security:woocommerce_writepanel_params.add_order_item_nonce};jQuery.post(woocommerce_writepanel_params.ajax_url,h,function(k){jQuery("table.woocommerce_order_items tbody#order_items_list").append(k);jQuery("table.woocommerce_order_items").unblock();jQuery("select.add_item_id").css("border-color","").val("");jQuery(".tips").easyTooltip()})}else{jQuery("select.add_item_id").css("border-color","red")}});jQuery("button.add_meta").live("click",function(){var g=jQuery(this).closest("tr.item").attr("rel");jQuery(this).closest("table.meta").find(".meta_items").append('<tr><td><input type="text" name="meta_name['+g+'][]" placeholder="'+woocommerce_writepanel_params.meta_name+'" /></td><td><input type="text" name="meta_value['+g+'][]" placeholder="'+woocommerce_writepanel_params.meta_value+'" /></td><td><button class="remove_meta button">&times;</button></td></tr>');return false});jQuery("button.remove_meta").live("click",function(){var g=confirm("Remove this meta key?");if(g){jQuery(this).closest("tr").remove()}return false});jQuery("button.billing-same-as-shipping").live("click",function(){var g=confirm(woocommerce_writepanel_params.copy_billing);if(g){jQuery("input#shipping_first_name").val(jQuery("input#billing_first_name").val());jQuery("input#shipping_last_name").val(jQuery("input#billing_last_name").val());jQuery("input#shipping_company").val(jQuery("input#billing_company").val());jQuery("input#shipping_address_1").val(jQuery("input#billing_address_1").val());jQuery("input#shipping_address_2").val(jQuery("input#billing_address_2").val());jQuery("input#shipping_city").val(jQuery("input#billing_city").val());jQuery("input#shipping_postcode").val(jQuery("input#billing_postcode").val());jQuery("input#shipping_country").val(jQuery("input#billing_country").val());jQuery("input#shipping_state").val(jQuery("input#billing_state").val())}return false});d("select#product-type").change(function(){var g=jQuery(this).val();d("#woocommerce-product-type-options .inside > div").hide();d("#"+g+"_product_options").show();if(g=="variable"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").show();jQuery(".options_group.grouping, .options_group.pricing").val("").hide();jQuery("td.enable_variation, th.enable_variation").show();jQuery("input#manage_stock").change()}else{if(g=="simple"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").show();jQuery(".options_group.grouping").show();jQuery("td.enable_variation, th.enable_variation").hide();jQuery("input#manage_stock").change()}else{if(g=="grouped"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").hide();jQuery(".options_group.grouping").val("").hide();jQuery("td.enable_variation, th.enable_variation").hide();jQuery("input#manage_stock").change()}else{if(g=="downloadable"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").show();jQuery(".options_group.grouping").show();jQuery("td.enable_variation, th.enable_variation").hide();jQuery("input#manage_stock").change()}else{if(g=="virtual"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").show();jQuery(".options_group.grouping").show();jQuery("td.enable_variation, th.enable_variation").hide();jQuery("input#manage_stock").change()}}}}}d("body").trigger("woocommerce-product-type-change",g,d(this))}).change();jQuery("input#manage_stock").change(function(){if(jQuery(this).is(":checked")){jQuery("div.stock_fields").show()}else{jQuery("div.stock_fields").hide()}}).change();var e=jQuery("#sale_price_dates_from, #sale_price_dates_to").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:true,showOn:"button",buttonImage:woocommerce_writepanel_params.calendar_image,buttonImageOnly:true,onSelect:function(j){var k=this.id=="sale_price_dates_from"?"minDate":"maxDate",g=jQuery(this).data("datepicker"),h=jQuery.datepicker.parseDate(g.settings.dateFormat||jQuery.datepicker._defaults.dateFormat,j,g.settings);e.not(this).datepicker("option",k,h)}});jQuery(".date-picker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:true,showOn:"button",buttonImage:woocommerce_writepanel_params.calendar_image,buttonImageOnly:true});jQuery("#attributes_list select.multiselect").multiselect({noneSelectedText:woocommerce_writepanel_params.select_terms,selectedList:4});var c=jQuery("#attributes_list").children("tr").get();c.sort(function(h,g){var k=jQuery(h).attr("rel");var j=jQuery(g).attr("rel");return(k<j)?-1:(k>j)?1:0});jQuery(c).each(function(g,h){jQuery("#attributes_list").append(h)});function a(){jQuery("table.woocommerce_attributes, table.woocommerce_variable_attributes").each(function(){if(jQuery("tbody tr",this).size()==0){jQuery(this).parent().hide()}else{jQuery(this).parent().show()}})}a();function b(){jQuery("#attributes_list tr").each(function(g,h){jQuery(".attribute_position",h).val(parseInt(jQuery(h).index("#attributes_list tr")))})}jQuery("button.add_attribute").click(function(){var h=jQuery("table.woocommerce_attributes tbody tr").size();var j=jQuery("select.attribute_taxonomy").val();if(!j){var k=jQuery("select#product-type").val();if(k!="variable"){enable_variation='style="display:none;"'}else{enable_variation=""}jQuery("table.woocommerce_attributes tbody").append('<tr><td><input type="text" name="attribute_names['+h+']" /><input type="hidden" name="attribute_is_taxonomy['+h+']" value="0" /><input type="hidden" name="attribute_position['+h+']" class="attribute_position" value="'+h+'" /></td><td><input type="text" name="attribute_values['+h+']" /></td><td class="center"><input type="checkbox" checked="checked" name="attribute_visibility['+h+']" value="1" /></td><td class="center enable_variation" '+enable_variation+'><input type="checkbox" name="attribute_variation['+h+']" value="1" /></td><td class="center"><button type="button" class="remove_row button">&times;</button></td></tr>')}else{var g=jQuery("table.woocommerce_attributes tbody tr."+j);jQuery("table.woocommerce_attributes tbody").append(jQuery(g));jQuery(g).show();b()}a()});jQuery("button.hide_row").live("click",function(){var g=confirm("Remove this attribute?");if(g){jQuery(this).parent().parent().find("select, input[type=text]").val("");jQuery(this).parent().parent().hide();a()}return false});jQuery("#attributes_list button.remove_row").live("click",function(){var g=confirm("Remove this attribute?");if(g){jQuery(this).parent().parent().remove();a();b()}return false});jQuery("table.woocommerce_attributes tbody").sortable({items:"tr",cursor:"move",axis:"y",scrollSensitivity:40,helper:function(h,g){g.children().each(function(){jQuery(this).width(jQuery(this).width())});return g},start:function(g,h){h.item.css("background-color","#f6f6f6")},stop:function(g,h){h.item.removeAttr("style");b()}});jQuery(".multi_select_products button").live("click",function(){var j=jQuery(this).parent().parent().parent().parent();if(jQuery(this).parent().parent().is(".multi_select_products_target")){jQuery(this).parent().remove()}else{var h=jQuery(".multi_select_products_target",jQuery(j));var g=jQuery("li[rel="+jQuery(this).parent().attr("rel")+"]",h);if(jQuery(g).size()>0){return false}jQuery(this).parent().clone().appendTo(h).find("button").html("X").parent().find("input").val(jQuery(this).parent().attr("rel"))}});var f;jQuery(".multi_select_products #product_search").bind("keyup click",function(){jQuery(".multi_select_products_source").addClass("loading");jQuery(".multi_select_products_source li:not(.product_search)").remove();if(f){f.abort()}var j=jQuery(this).val();var g=this;var h=jQuery(this).attr("rel");if(j.length<3){jQuery(".multi_select_products_source").removeClass("loading");return}var k={name:h,search:encodeURI(j),action:"woocommerce_upsell_crosssell_search_products",security:woocommerce_writepanel_params.upsell_crosssell_search_products_nonce};f=jQuery.ajax({url:woocommerce_writepanel_params.ajax_url,data:k,type:"POST",success:function(l){jQuery(".multi_select_products_source").removeClass("loading");jQuery(".multi_select_products_source li:not(.product_search)").remove();jQuery(g).parent().parent().append(l)}})})});