jQuery(function(d){jQuery("ul.tabs").show();jQuery("div.panel-wrap").each(function(){jQuery("div.panel:not(div.panel:first)",this).hide()});jQuery("ul.tabs a").click(function(){var f=jQuery(this).closest("div.panel-wrap");jQuery("ul.tabs li",f).removeClass("active");jQuery(this).parent().addClass("active");jQuery("div.panel",f).hide();jQuery(jQuery(this).attr("href")).show();return false});jQuery("#order_items_list button.remove_row").live("click",function(){var f=confirm(woocommerce_writepanel_params.remove_item_notice);if(f){jQuery(this).closest("tr.item").hide();jQuery("input",jQuery(this).closest("tr.item")).val("")}return false});jQuery("button.calc_totals").live("click",function(){var o=confirm(woocommerce_writepanel_params.cart_total);if(o){var g=jQuery("#order_items_list tr.item").size();var m=0;var n=jQuery("input#order_discount").val();var f=jQuery("input#order_shipping").val();var j=parseFloat(jQuery("input#order_shipping_tax").val());var k=0;var h=0;var l=0;if(!n){n=0}if(!f){f=0}if(!j){j=0}if(g>0){for(i=0;i<g;i++){itemCost=jQuery("input[name^=item_cost]:eq("+i+")").val();itemQty=parseInt(jQuery("input[name^=item_quantity]:eq("+i+")").val());itemTax=jQuery("input[name^=item_tax_rate]:eq("+i+")").val();if(!itemCost){itemCost=0}if(!itemTax){itemTax=0}totalItemTax=0;totalItemCost=itemCost*itemQty;if(itemTax&&itemTax>0){taxRate=itemTax/100;itemTaxAmount=((itemCost*taxRate)*100);itemTaxAmount=itemTaxAmount.toFixed(2);totalItemTax=Math.round(itemTaxAmount)/100;totalItemTax=totalItemTax*itemQty}h=h+totalItemCost;k=k+totalItemTax}}m=h;l=parseFloat(m)+parseFloat(k)-parseFloat(n)+parseFloat(f)+parseFloat(j);if(l<0){l=0}jQuery("input#order_subtotal").val(m.toFixed(2));jQuery("input#order_tax").val(k.toFixed(2));jQuery("input#order_shipping_tax").val(j.toFixed(2));jQuery("input#order_total").val(l.toFixed(2))}return false});jQuery("button.add_shop_order_item").click(function(){var h=jQuery("select.add_item_id").val();if(h){jQuery("table.woocommerce_order_items").block({message:null,overlayCSS:{background:"#fff url("+woocommerce_writepanel_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:0.6}});var f=jQuery("table.woocommerce_order_items tbody tr.item").size();var g={action:"woocommerce_add_order_item",item_to_add:jQuery("select.add_item_id").val(),index:f,security:woocommerce_writepanel_params.add_order_item_nonce};jQuery.post(woocommerce_writepanel_params.ajax_url,g,function(j){jQuery("table.woocommerce_order_items tbody#order_items_list").append(j);jQuery("table.woocommerce_order_items").unblock();jQuery("select.add_item_id").css("border-color","").val("");jQuery(".tips").easyTooltip()})}else{jQuery("select.add_item_id").css("border-color","red")}});jQuery("button.add_meta").live("click",function(){var f=jQuery(this).closest("tr.item").attr("rel");jQuery(this).closest("table.meta").find(".meta_items").append('<tr><td><input type="text" name="meta_name['+f+'][]" placeholder="'+woocommerce_writepanel_params.meta_name+'" /></td><td><input type="text" name="meta_value['+f+'][]" placeholder="'+woocommerce_writepanel_params.meta_value+'" /></td><td><button class="remove_meta button">&times;</button></td></tr>');return false});jQuery("button.remove_meta").live("click",function(){var f=confirm("Remove this meta key?");if(f){jQuery(this).closest("tr").remove()}return false});jQuery("button.billing-same-as-shipping").live("click",function(){var f=confirm(woocommerce_writepanel_params.copy_billing);if(f){jQuery("input#shipping_first_name").val(jQuery("input#billing_first_name").val());jQuery("input#shipping_last_name").val(jQuery("input#billing_last_name").val());jQuery("input#shipping_company").val(jQuery("input#billing_company").val());jQuery("input#shipping_address_1").val(jQuery("input#billing_address_1").val());jQuery("input#shipping_address_2").val(jQuery("input#billing_address_2").val());jQuery("input#shipping_city").val(jQuery("input#billing_city").val());jQuery("input#shipping_postcode").val(jQuery("input#billing_postcode").val());jQuery("input#shipping_country").val(jQuery("input#billing_country").val());jQuery("input#shipping_state").val(jQuery("input#billing_state").val())}return false});d("select#product-type").change(function(){var f=jQuery(this).val();d("#woocommerce-product-type-options .inside > div").hide();d("#"+f+"_product_options").show();if(f=="variable"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").show();jQuery(".options_group.grouping").val("").hide();jQuery("td.enable_variation, th.enable_variation").show()}else{if(f=="simple"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").show();jQuery(".options_group.grouping").show();jQuery("td.enable_variation, th.enable_variation").hide()}else{if(f=="grouped"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").hide();jQuery(".options_group.grouping").val("").hide();jQuery("td.enable_variation, th.enable_variation").hide()}else{if(f=="downloadable"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").show();jQuery(".options_group.grouping").show();jQuery("td.enable_variation, th.enable_variation").hide()}else{if(f=="virtual"){jQuery(".stock_fields, .manage_stock_field, .tax_tab, .options_group.pricing").show();jQuery(".options_group.grouping").show();jQuery("td.enable_variation, th.enable_variation").hide()}}}}}d("body").trigger("woocommerce-product-type-change",f,d(this))}).change();jQuery("input#manage_stock").change(function(){if(jQuery(this).is(":checked")){jQuery("div.stock_fields").show()}else{jQuery("div.stock_fields").hide()}}).change();var e=jQuery("#sale_price_dates_from, #sale_price_dates_to").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:true,showOn:"button",buttonImage:woocommerce_writepanel_params.calendar_image,buttonImageOnly:true,onSelect:function(h){var j=this.id=="sale_price_dates_from"?"minDate":"maxDate",f=jQuery(this).data("datepicker"),g=jQuery.datepicker.parseDate(f.settings.dateFormat||jQuery.datepicker._defaults.dateFormat,h,f.settings);e.not(this).datepicker("option",j,g)}});jQuery("#attributes_list select.multiselect").multiselect({noneSelectedText:woocommerce_writepanel_params.select_terms,selectedList:4});var c=jQuery("#attributes_list").children("tr").get();c.sort(function(g,f){var j=jQuery(g).attr("rel");var h=jQuery(f).attr("rel");return(j<h)?-1:(j>h)?1:0});jQuery(c).each(function(f,g){jQuery("#attributes_list").append(g)});function a(){jQuery("table.woocommerce_attributes, table.woocommerce_variable_attributes").each(function(){if(jQuery("tbody tr",this).size()==0){jQuery(this).parent().hide()}else{jQuery(this).parent().show()}})}a();function b(){jQuery("#attributes_list tr").each(function(f,g){jQuery(".attribute_position",g).val(parseInt(jQuery(g).index("#attributes_list tr")))})}jQuery("button.add_attribute").click(function(){var g=jQuery("table.woocommerce_attributes tbody tr").size();var h=jQuery("select.attribute_taxonomy").val();if(!h){var j=jQuery("select#product-type").val();if(j!="variable"){enable_variation='style="display:none;"'}else{enable_variation=""}jQuery("table.woocommerce_attributes tbody").append('<tr><td class="center"><button type="button" class="button move_up">&uarr;</button><button type="button" class="move_down button">&darr;</button><input type="hidden" name="attribute_position['+g+']" class="attribute_position" value="'+g+'" /></td><td><input type="text" name="attribute_names['+g+']" /><input type="hidden" name="attribute_is_taxonomy['+g+']" value="0" /></td><td><input type="text" name="attribute_values['+g+']" /></td><td class="center"><input type="checkbox" checked="checked" name="attribute_visibility['+g+']" value="1" /></td><td class="center enable_variation" '+enable_variation+'><input type="checkbox" name="attribute_variation['+g+']" value="1" /></td><td class="center"><button type="button" class="remove_row button">&times;</button></td></tr>')}else{var f=jQuery("table.woocommerce_attributes tbody tr."+h);jQuery("table.woocommerce_attributes tbody").append(jQuery(f));jQuery(f).show();b()}a()});jQuery("button.hide_row").live("click",function(){var f=confirm("Remove this attribute?");if(f){jQuery(this).parent().parent().find("select, input[type=text]").val("");jQuery(this).parent().parent().hide();a()}return false});jQuery("#attributes_list button.remove_row").live("click",function(){var f=confirm("Remove this attribute?");if(f){jQuery(this).parent().parent().remove();a();b()}return false});jQuery("button.move_up").live("click",function(){var g=jQuery(this).parent().parent();var f=jQuery(g).prev("tr");jQuery(g).after(f);b()});jQuery("button.move_down").live("click",function(){var g=jQuery(this).parent().parent();var f=jQuery(g).next("tr");jQuery(g).before(f);b()});jQuery(".multi_select_products button").live("click",function(){var h=jQuery(this).parent().parent().parent().parent();if(jQuery(this).parent().parent().is(".multi_select_products_target")){jQuery(this).parent().remove()}else{var g=jQuery(".multi_select_products_target",jQuery(h));var f=jQuery("li[rel="+jQuery(this).parent().attr("rel")+"]",g);if(jQuery(f).size()>0){return false}jQuery(this).parent().clone().appendTo(g).find("button").html("X").parent().find("input").val(jQuery(this).parent().attr("rel"))}});jQuery(".multi_select_products #product_search").bind("keyup click",function(){jQuery(".multi_select_products_source li:not(.product_search)").remove();var h=encodeURI(jQuery(this).val());var f=this;var g=jQuery(this).attr("rel");if(h.length<3){return}var j={name:g,search:h,action:"woocommerce_upsell_crosssell_search_products",security:woocommerce_writepanel_params.upsell_crosssell_search_products_nonce};jQuery.post(woocommerce_writepanel_params.ajax_url,j,function(k){jQuery(".multi_select_products_source li:not(.product_search)").remove();jQuery(f).parent().parent().append(k)})})});